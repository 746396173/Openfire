{
  if (this.mediaStream != null) {
    mediaStream.removePropertyChangeListener(streamPropertyChangeListener);
    if (recorder != null) {
      recorder.done();
      recorder=null;
      snapshot=0;
    }
  }
}
