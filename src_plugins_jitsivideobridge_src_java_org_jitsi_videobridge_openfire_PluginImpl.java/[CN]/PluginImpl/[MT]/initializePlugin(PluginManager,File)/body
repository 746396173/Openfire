{
  PropertyEventDispatcher.addListener(this);
  System.setProperty("net.java.sip.communicator.SC_HOME_DIR_LOCATION",pluginDirectory.getPath());
  System.setProperty("net.java.sip.communicator.SC_HOME_DIR_NAME",".");
  System.setProperty("org.jitsi.impl.neomedia.transform.srtp.SRTPCryptoContext.checkReplay",JiveGlobals.getProperty(CHECKREPLAY_PROPERTY_NAME,"false"));
  try {
    String appName=JiveGlobals.getProperty(VIDEO_CONFERENCE_PROPERTY_NAME,"jitsi");
    Log.info("Initialize Web App " + appName);
    ContextHandlerCollection contexts=HttpBindManager.getInstance().getContexts();
    WebAppContext context=new WebAppContext(contexts,pluginDirectory.getPath(),"/" + appName);
    context.setWelcomeFiles(new String[]{"index.html"});
    String username=JiveGlobals.getProperty(USERNAME_PROPERTY_NAME,null);
    String password=JiveGlobals.getProperty(PASSWORD_PROPERTY_NAME,"jitsi");
    if (username != null) {
      context.setSecurityHandler(basicAuth(username,password,"Private!"));
    }
    createIQHandlers();
  }
 catch (  Exception e) {
    Log.error("Jitsi Videobridge web app initialize error",e);
  }
  String maxVal=JiveGlobals.getProperty(MAX_PORT_NUMBER_PROPERTY_NAME);
  String minVal=JiveGlobals.getProperty(MIN_PORT_NUMBER_PROPERTY_NAME);
  if (maxVal != null)   setIntProperty(DefaultStreamConnector.MAX_PORT_NUMBER_PROPERTY_NAME,maxVal);
  if (minVal != null)   setIntProperty(DefaultStreamConnector.MIN_PORT_NUMBER_PROPERTY_NAME,minVal);
  checkNatives();
  ComponentManager componentManager=ComponentManagerFactory.getComponentManager();
  String subdomain=ComponentImpl.SUBDOMAIN;
  Component component=new ComponentImpl();
  boolean added=false;
  try {
    componentManager.addComponent(subdomain,component);
    added=true;
    componentImpl=(ComponentImpl)component;
  }
 catch (  ComponentException ce) {
    ce.printStackTrace(System.err);
  }
  if (added) {
    this.componentManager=componentManager;
    this.subdomain=subdomain;
    this.component=component;
  }
 else {
    this.componentManager=null;
    this.subdomain=null;
    this.component=null;
  }
}
