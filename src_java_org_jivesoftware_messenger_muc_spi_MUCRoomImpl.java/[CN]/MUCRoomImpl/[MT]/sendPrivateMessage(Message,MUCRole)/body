{
  String resource=message.getRecipient().getResource();
  MUCRole occupant=occupants.get(resource.toLowerCase());
  if (occupant != null) {
    message.setSender(senderRole.getRoleAddress());
    message.setRecipient(occupant.getChatUser().getAddress());
    router.route(message);
  }
 else {
    throw new NotFoundException();
  }
}
