{
  MUCPersistenceManager.saveToDB(this);
  if (!savedToDB) {
    savedToDB=true;
    for (    String owner : owners) {
      MUCPersistenceManager.saveAffiliationToDB(this,owner,null,MUCRole.OWNER,MUCRole.NONE);
    }
    for (    String admin : admins) {
      MUCPersistenceManager.saveAffiliationToDB(this,admin,null,MUCRole.ADMINISTRATOR,MUCRole.NONE);
    }
    for (Iterator it=members.keySet().iterator(); it.hasNext(); ) {
      String bareJID=(String)it.next();
      MUCPersistenceManager.saveAffiliationToDB(this,bareJID,(String)members.get(bareJID),MUCRole.MEMBER,MUCRole.NONE);
    }
    for (    String outcast : outcasts) {
      MUCPersistenceManager.saveAffiliationToDB(this,outcast,null,MUCRole.OUTCAST,MUCRole.NONE);
    }
  }
}
