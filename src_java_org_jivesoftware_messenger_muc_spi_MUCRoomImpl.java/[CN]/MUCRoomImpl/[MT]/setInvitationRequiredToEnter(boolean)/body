{
  List<Presence> presences=new ArrayList<Presence>();
  if (invitationRequiredToEnter && !this.invitationRequiredToEnter) {
    for (    MUCRole occupant : occupants.values()) {
      if (occupant.getAffiliation() > MUCRole.MEMBER) {
        try {
          presences.add(kickOccupant(occupant.getChatUser().getAddress().toStringPrep(),null,LocaleUtils.getLocalizedString("muc.roomIsNowMembersOnly")));
        }
 catch (        NotAllowedException e) {
        }
      }
    }
  }
  this.invitationRequiredToEnter=invitationRequiredToEnter;
  return presences;
}
