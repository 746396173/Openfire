{
  if (canOccupantsChangeSubject() || MUCRole.MODERATOR == role.getRole()) {
    lock.writeLock().lock();
    try {
      subject=packet.getSubject();
      MUCPersistenceManager.updateRoomSubject(this,subject);
    }
  finally {
      lock.writeLock().unlock();
    }
    packet.setSender(role.getRoleAddress());
    send(packet);
  }
 else {
    throw new ForbiddenException();
  }
}
