{
  Iterator ports;
  if (getConnectionManager() == null) {
    ports=Collections.EMPTY_LIST.iterator();
  }
 else {
    ports=getConnectionManager().getPorts();
  }
  if (!initialized) {
    throw new IllegalStateException("Not initialized yet");
  }
  return new XMPPServerInfoImpl(name,version,startDate,stopDate,ports);
}
