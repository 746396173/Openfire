{
  String username=session.getAddress().getNode();
  SessionMap resources;
synchronized (username.intern()) {
    resources=sessions.get(username);
    if (resources == null) {
      resources=new SessionMap();
      sessions.put(username,resources);
    }
    resources.addSession(session);
    preAuthenticatedSessions.remove(session.getStreamID().toString());
  }
  SessionEventDispatcher.dispatchEvent(session,SessionEventDispatcher.EventType.session_created);
}
