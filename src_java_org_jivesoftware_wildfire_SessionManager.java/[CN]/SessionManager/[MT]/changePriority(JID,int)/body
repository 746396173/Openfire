{
  if (sender.getNode() == null) {
    return;
  }
  String username=sender.getNode();
synchronized (username.intern()) {
    SessionMap resources=sessions.get(username);
    if (resources == null) {
      return;
    }
    resources.changePriority(sender,priority);
    Session defaultSession=resources.getDefaultSession(true);
    routingTable.addRoute(new JID(defaultSession.getAddress().getNode(),defaultSession.getAddress().getDomain(),""),defaultSession);
  }
}
