{
  boolean modified=false;
  try {
    RosterItem item;
    if (roster.isRosterItem(target)) {
      item=roster.getRosterItem(target);
    }
 else {
      item=roster.createRosterItem(target);
    }
    modified=updateState(item,type,isSending);
    roster.updateRosterItem(item);
  }
 catch (  UserNotFoundException e) {
    Log.error(LocaleUtils.getLocalizedString("admin.error"),e);
  }
  return modified;
}
