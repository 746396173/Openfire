{
  Long userID=null;
  Roster roster=null;
  if (localServer.isLocal(address) && !"".equals(address.getName())) {
    try {
      if (chatbotManager != null) {
        if (chatbotManager.isChatbot(address)) {
          userID=new Long(chatbotManager.getChatbotID(address.getNamePrep()));
        }
      }
    }
 catch (    UserNotFoundException e) {
    }
    try {
      if (userID == null && userManager != null) {
        userID=new Long(userManager.getUserID(address.getNamePrep()));
      }
    }
 catch (    UserNotFoundException e) {
    }
    if (userID != null) {
      roster=(Roster)CacheManager.getCache("userid2roster").get(userID);
      if (roster == null) {
        roster=new CachedRosterImpl(userID.longValue(),address.getNamePrep());
        CacheManager.getCache("userid2roster").put(userID,roster);
      }
    }
  }
  return roster;
}
