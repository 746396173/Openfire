{
  try {
    username=Stringprep.nodeprep(username);
  }
 catch (  StringprepException se) {
    throw new IllegalArgumentException("Invalid username: " + username,se);
  }
  User user=provider.createUser(username,password,name,email);
  userCache.put(username,user);
  return user;
}
