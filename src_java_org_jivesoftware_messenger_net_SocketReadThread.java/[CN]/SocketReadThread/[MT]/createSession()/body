{
  XmlPullParser xpp=reader.getXPPParser();
  for (int eventType=xpp.getEventType(); eventType != XmlPullParser.START_TAG; eventType=xpp.next()) {
  }
  if (!xpp.getName().equals("stream")) {
    throw new XmlPullParserException(LocaleUtils.getLocalizedString("admin.error.bad-stream"));
  }
  if (!xpp.getNamespace(xpp.getPrefix()).equals(ETHERX_NAMESPACE)) {
    throw new XmlPullParserException(LocaleUtils.getLocalizedString("admin.error.bad-namespace"));
  }
  XMLWriter xser=connection.getSerializer();
  String s="<stream:stream to=\"jivesoftware.com\" xmlns=\"jabber:client\" xmlns:stream=\"http://etherx.jabber.org/streams\" version=\"1.0\" >";
  Element streamElement=null;
  try {
    streamElement=DocumentHelper.createElement(s);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  streamElement.addAttribute("from",serverName);
  streamElement.addAttribute("id",session.getStreamID().toString());
  xser.write(streamElement);
  xser.flush();
}
