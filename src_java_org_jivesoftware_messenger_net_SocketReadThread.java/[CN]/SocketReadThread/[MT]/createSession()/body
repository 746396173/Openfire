{
  XmlPullParser xpp=reader.getXPPParser();
  for (int eventType=xpp.getEventType(); eventType != XmlPullParser.START_TAG; eventType=xpp.next()) {
  }
  if (!xpp.getName().equals("stream")) {
    throw new XmlPullParserException(LocaleUtils.getLocalizedString("admin.error.bad-stream"));
  }
  if (!xpp.getNamespace(xpp.getPrefix()).equals(ETHERX_NAMESPACE)) {
    throw new XmlPullParserException(LocaleUtils.getLocalizedString("admin.error.bad-namespace"));
  }
  Writer writer=connection.getWriter();
  String startPacket="<?xml version='1.0' encoding='" + CHARSET + "'?><stream:stream xmlns:stream=\"http://etherx.jabber.org/streams\" xmlns=\"jabber:client\" from=\""+ serverName+ "\" id=\""+ session.getStreamID().toString()+ "\">";
  writer.write(startPacket);
  writer.flush();
}
