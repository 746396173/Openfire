{
  for (int i=0, size=element.nodeCount(); i < size; i++) {
    Node node=element.node(i);
    if (node instanceof Element) {
      Element emement=(Element)node;
      Attribute attr=emement.attribute("attrs");
      if (attr != null) {
        String[] attrs=attr.getStringValue().split(",");
        Object[] values=new String[attrs.length];
        for (int j=0; j < attrs.length; j++) {
          values[j]=map.get(attrs[j]);
        }
        emement.remove(attr);
        emement.setText(MessageFormat.format(emement.getStringValue(),values));
      }
      treeWalk(emement,map);
    }
  }
  return element;
}
