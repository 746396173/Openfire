{
  Log.debug("Processing packet in ClientToComponentUpdateProcessor for " + _myDomain);
  Element query=((IQ)packet).getChildElement();
  if (query != null && query.getNamespaceURI().equals("jabber:iq:roster")) {
    if (findNodesInDocument(query.getDocument(),"//roster:item").size() > 0) {
      for (      Node n : findNodesInDocument(query.getDocument(),"//roster:item")) {
        String jid=n.valueOf("@jid");
        if (jid.contains("@" + _myDomain) && !n.valueOf("@subscription").equals("remove")) {
          Log.debug("Mirroring packet from local network to legacy component " + _myDomain);
          IQ forward=(IQ)packet.createCopy();
          forward.setTo(_myDomain);
          dispatchPacket(forward);
        }
      }
    }
  }
}
