{
  groupCache=CacheManager.initializeCache("Group","group",512 * 1024,JiveConstants.MINUTE * 30);
  userGroupCache=CacheManager.initializeCache("User Group Cache","userGroup",512 * 1024,JiveConstants.MINUTE * 3);
  String className=JiveGlobals.getXMLProperty("provider.group.className","org.jivesoftware.wildfire.group.DefaultGroupProvider");
  try {
    Class c=ClassUtils.forName(className);
    provider=(GroupProvider)c.newInstance();
  }
 catch (  Exception e) {
    Log.error("Error loading group provider: " + className,e);
    provider=new DefaultGroupProvider();
  }
  GroupEventDispatcher.addListener(new GroupEventListener(){
    public void groupCreated(    Group group,    Map params){
      userGroupCache.clear();
    }
    public void groupDeleting(    Group group,    Map params){
      userGroupCache.clear();
    }
    public void groupModified(    Group group,    Map params){
    }
    public void memberAdded(    Group group,    Map params){
      userGroupCache.clear();
    }
    public void memberRemoved(    Group group,    Map params){
      userGroupCache.clear();
    }
    public void adminAdded(    Group group,    Map params){
      userGroupCache.clear();
    }
    public void adminRemoved(    Group group,    Map params){
      userGroupCache.clear();
    }
  }
);
}
