{
  Component component=getComponent(packet.getFrom());
  if (component != null) {
    if (packet instanceof IQ && IQ.Type.result == ((IQ)packet).getType()) {
      IQ iq=(IQ)packet;
      Element childElement=iq.getChildElement();
      String namespace=null;
      if (childElement != null) {
        namespace=childElement.getNamespaceURI();
      }
      if ("http://jabber.org/protocol/disco#info".equals(namespace)) {
        Element identity=childElement.element("identity");
        XMPPServer.getInstance().getIQDiscoItemsHandler().addComponentItem(packet.getFrom().toBareJID(),identity.attributeValue("name"));
        if (component instanceof ComponentSession.ExternalComponent) {
          ComponentSession.ExternalComponent externalComponent=(ComponentSession.ExternalComponent)component;
          externalComponent.setName(identity.attributeValue("name"));
          externalComponent.setType(identity.attributeValue("type"));
          externalComponent.setCategory(identity.attributeValue("category"));
        }
      }
    }
  }
}
