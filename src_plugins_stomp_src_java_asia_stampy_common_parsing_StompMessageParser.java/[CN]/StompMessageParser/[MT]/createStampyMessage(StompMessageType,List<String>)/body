{
  MSG message=null;
switch (type) {
case ABORT:
    message=(MSG)new AbortMessage();
  break;
case ACK:
message=(MSG)new AckMessage();
break;
case BEGIN:
message=(MSG)new BeginMessage();
break;
case COMMIT:
message=(MSG)new CommitMessage();
break;
case CONNECT:
message=(MSG)new ConnectMessage();
break;
case CONNECTED:
message=(MSG)new ConnectedMessage();
break;
case DISCONNECT:
message=(MSG)new DisconnectMessage();
break;
case ERROR:
ErrorMessage error=new ErrorMessage();
message=(MSG)error;
break;
case MESSAGE:
MessageMessage mm=new MessageMessage();
message=(MSG)mm;
break;
case NACK:
message=(MSG)new NackMessage();
break;
case RECEIPT:
message=(MSG)new ReceiptMessage();
break;
case SEND:
SendMessage send=new SendMessage();
message=(MSG)send;
break;
case STOMP:
message=(MSG)new StompMessage();
break;
case SUBSCRIBE:
message=(MSG)new SubscribeMessage();
break;
case UNSUBSCRIBE:
message=(MSG)new UnsubscribeMessage();
break;
default :
break;
}
message.getHeader();
addHeaders(message,headers);
return message;
}
