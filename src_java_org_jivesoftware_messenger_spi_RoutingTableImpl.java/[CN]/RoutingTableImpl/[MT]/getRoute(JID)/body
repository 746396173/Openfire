{
  RoutableChannelHandler route=null;
  routeLock.readLock().lock();
  try {
    Object nameRoutes=routes.get(node.getDomain());
    if (nameRoutes instanceof ChannelHandler) {
      route=(RoutableChannelHandler)nameRoutes;
    }
 else {
      Object resourceRoutes=((Hashtable)nameRoutes).get(node.getNode());
      if (resourceRoutes instanceof ChannelHandler) {
        route=(RoutableChannelHandler)resourceRoutes;
      }
 else       if (resourceRoutes != null) {
        String resource=node.getResource() == null ? "" : node.getResource();
        route=(RoutableChannelHandler)((Hashtable)resourceRoutes).get(resource);
      }
 else {
        throw new NoSuchRouteException(node.toString());
      }
    }
  }
 catch (  Exception e) {
    throw new NoSuchRouteException(node == null ? "No node" : node.toString(),e);
  }
 finally {
    routeLock.readLock().unlock();
  }
  if (route == null) {
    throw new NoSuchRouteException(node == null ? "No node" : node.toString());
  }
  return route;
}
