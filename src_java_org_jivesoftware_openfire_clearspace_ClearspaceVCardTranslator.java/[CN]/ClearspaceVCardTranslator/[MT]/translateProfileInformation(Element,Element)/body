{
  List<Element> profilesList=(List<Element>)profiles.elements("return");
  for (  Element profileElement : profilesList) {
    long fieldID=Long.valueOf(profileElement.elementText("fieldID"));
    ClearspaceField field=ClearspaceField.valueOf(fieldID);
    if (field == null) {
      continue;
    }
    String fieldText=profileElement.elementText("value");
    if (fieldText == null) {
      fieldText=profileElement.elementText("values");
      if (fieldText == null) {
        continue;
      }
    }
    String fieldType=getFieldType(fieldText);
    String fieldValue=getFieldValue(fieldText);
switch (field) {
case TITLE:
      vCard.addElement("TITLE").setText(fieldValue);
    break;
case DEPARTMENT:
  vCard.addElement("ORG").addElement("ORGUNIT").setText(fieldValue);
break;
case TIME_ZONE:
vCard.addElement("TZ").setText(fieldValue);
break;
case ADDRESS:
Element workAdr=vCard.addElement("ADR");
workAdr.addElement("WORK");
translateAddress(fieldValue,workAdr);
break;
case HOME_ADDRESS:
Element homeAdr=vCard.addElement("ADR");
homeAdr.addElement("HOME");
translateAddress(fieldValue,homeAdr);
break;
case URL:
vCard.addElement("URL").setText(fieldValue);
break;
case ALT_EMAIL:
fieldValue=getFieldValue(fieldValue);
Element email=vCard.addElement("EMAIL");
email.addElement("USERID").setText(fieldValue);
email.addElement("INTERNET").setText(fieldValue);
if ("work".equalsIgnoreCase(fieldType)) {
email.addElement("WORK");
}
 else if ("home".equalsIgnoreCase(fieldType)) {
email.addElement("HOME");
}
break;
case PHONE:
Element tel=vCard.addElement("TEL");
tel.addElement("NUMBER").setText(fieldValue);
if ("home".equalsIgnoreCase(fieldType)) {
tel.addElement("HOME");
tel.addElement("VOICE");
}
 else if ("work".equalsIgnoreCase(fieldType)) {
tel.addElement("WORK");
tel.addElement("VOICE");
}
 else if ("fax".equalsIgnoreCase(fieldType)) {
tel.addElement("WORK");
tel.addElement("FAX");
}
 else if ("mobile".equalsIgnoreCase(fieldType)) {
tel.addElement("WORK");
tel.addElement("CELL");
}
 else if ("pager".equalsIgnoreCase(fieldType)) {
tel.addElement("WORK");
tel.addElement("PAGER");
}
 else if ("other".equalsIgnoreCase(fieldType)) {
}
break;
}
}
}
