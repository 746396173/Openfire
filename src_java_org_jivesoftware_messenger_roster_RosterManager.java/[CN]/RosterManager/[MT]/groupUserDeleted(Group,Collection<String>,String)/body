{
  Roster deletedUserRoster=(Roster)CacheManager.getCache("username2roster").get(deletedUser);
  for (  String userToUpdate : users) {
    Roster roster=(Roster)CacheManager.getCache("username2roster").get(userToUpdate);
    if (roster != null) {
      roster.deleteSharedUser(group,deletedUser);
    }
    if (deletedUserRoster != null) {
      try {
        User user=UserManager.getInstance().getUser(userToUpdate);
        Collection<Group> groups=GroupManager.getInstance().getGroups(user);
        deletedUserRoster.deleteSharedUser(userToUpdate,groups,group);
      }
 catch (      UserNotFoundException e) {
      }
    }
  }
}
