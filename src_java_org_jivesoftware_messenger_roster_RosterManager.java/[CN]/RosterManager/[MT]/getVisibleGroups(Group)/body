{
  Collection<Group> answer=new HashSet<Group>();
  Collection<Group> groups=GroupManager.getInstance().getGroups();
  for (  Group group : groups) {
    String showInRoster=group.getProperties().get("sharedRoster.showInRoster");
    if ("onlyGroup".equals(showInRoster)) {
      Collection<Group> groupList=parseGroups(group.getProperties().get("sharedRoster.groupList"));
      if (groupList.contains(groupToCheck)) {
        answer.add(group);
      }
    }
  }
  return answer;
}
