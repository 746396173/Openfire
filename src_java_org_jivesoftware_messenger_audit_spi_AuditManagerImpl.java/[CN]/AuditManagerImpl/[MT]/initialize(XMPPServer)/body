{
  super.initialize(server);
  enabled=JiveGlobals.getBooleanProperty("xmpp.audit.active");
  auditMessage=JiveGlobals.getBooleanProperty("xmpp.audit.message");
  auditPresence=JiveGlobals.getBooleanProperty("xmpp.audit.presence");
  auditIQ=JiveGlobals.getBooleanProperty("xmpp.audit.iq");
  auditXPath=JiveGlobals.getBooleanProperty("xmpp.audit.xpath");
  maxSize=JiveGlobals.getIntProperty("xmpp.audit.maxsize",MAX_FILE_SIZE);
  maxCount=JiveGlobals.getIntProperty("xmpp.audit.maxcount",MAX_FILE_COUNT);
  logTimeout=JiveGlobals.getIntProperty("xmpp.audit.logtimeout",DEFAULT_LOG_TIMEOUT);
  logDir=JiveGlobals.getProperty("xmpp.audit.logdir",JiveGlobals.getHomeDirectory() + File.separator + "logs");
  String ignoreString=JiveGlobals.getProperty("xmpp.audit.ignore","");
  StringTokenizer tokenizer=new StringTokenizer(ignoreString,", ");
  while (tokenizer.hasMoreTokens()) {
    String username=tokenizer.nextToken();
    ignoreList.add(username);
  }
  auditor=new AuditorImpl(this);
  auditor.setMaxValues(maxSize,maxCount);
  auditor.setLogTimeout(logTimeout);
  auditor.setLogDir(logDir);
  interceptor=new AuditorInterceptor();
  if (enabled) {
    InterceptorManager.getInstance().addInterceptor(interceptor);
  }
}
