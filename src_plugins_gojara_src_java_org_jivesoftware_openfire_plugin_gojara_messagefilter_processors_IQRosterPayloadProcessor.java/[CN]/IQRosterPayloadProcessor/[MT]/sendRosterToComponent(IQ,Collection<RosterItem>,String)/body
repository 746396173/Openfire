{
  IQ response=IQ.createResultIQ(requestPacket);
  response.setTo(subdomain);
  Element query=new DefaultElement("query");
  for (  RosterItem i : items) {
    if (i.getJid().toString().contains(subdomain)) {
      Log.debug("Roster exchange for external component " + subdomain + ". Sending user "+ i.getJid().toString());
      Element item=new DefaultElement("item",null);
      item.add(new DefaultAttribute("jid",i.getJid().toString()));
      item.add(new DefaultAttribute("name",i.getNickname()));
      item.add(new DefaultAttribute("subscription","both"));
      for (      String s : i.getGroups()) {
        Element group=new DefaultElement("group");
        group.setText(s);
        item.add(group);
      }
      query.add(item);
    }
  }
  query.addNamespace("","jabber:iq:roster");
  response.setChildElement(query);
  dispatchPacket(response);
}
