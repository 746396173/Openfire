{
  Log.debug("SmackConnection - deliverRawText\n" + text);
  try {
    StringReader stringReader=new StringReader(text);
    XmlPullParser parser=new MXParser();
    parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES,true);
    parser.setInput(stringReader);
    int eventType=parser.getEventType();
    do {
      if (eventType == XmlPullParser.START_TAG) {
        if (parser.getName().equals("message")) {
          this.reader.processPacket(PacketParserUtils.parseMessage(parser));
        }
 else         if (parser.getName().equals("iq")) {
          this.reader.processPacket(PacketParserUtils.parseIQ(parser,reader.connection));
        }
 else         if (parser.getName().equals("presence")) {
          this.reader.processPacket(PacketParserUtils.parsePresence(parser));
        }
      }
 else       if (eventType == XmlPullParser.END_TAG) {
      }
      eventType=parser.next();
    }
 while (eventType != XmlPullParser.END_DOCUMENT);
  }
 catch (  Exception e) {
    Log.error("deliverRawText error",e);
  }
}
