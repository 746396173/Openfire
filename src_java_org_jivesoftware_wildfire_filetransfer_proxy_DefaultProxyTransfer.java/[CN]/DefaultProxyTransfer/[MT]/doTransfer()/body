{
  if (!isActivatable()) {
    throw new IOException("Transfer missing party");
  }
  ReadableByteChannel in=getInputChannel();
  WritableByteChannel out=new ProxyOutputChannel(getOutputChannel());
  ByteBuffer buffer=ByteBuffer.allocate(BUFFER_SIZE);
  int count=0;
  amountWritten=0;
  do {
    out.write(buffer);
    amountWritten+=count;
    buffer.clear();
    count=in.read(buffer);
    buffer.flip();
  }
 while (count >= 0);
  in.close();
  out.close();
}
