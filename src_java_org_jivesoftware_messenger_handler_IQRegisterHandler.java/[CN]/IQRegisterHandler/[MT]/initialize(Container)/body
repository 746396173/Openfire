{
  super.initialize(container);
  if (probeResult == null) {
    probeResult=DocumentHelper.createElement(QName.get("query","jabber:iq:register"));
    probeResult.addElement("username");
    probeResult.addElement("password");
    probeResult.addElement("email");
    XDataFormImpl registrationForm=new XDataFormImpl(DataForm.TYPE_FORM);
    registrationForm.setTitle("XMPP Client Registration");
    registrationForm.addInstruction("Please provide the following information");
    XFormFieldImpl field=new XFormFieldImpl("FORM_TYPE");
    field.setType(FormField.TYPE_HIDDEN);
    field.addValue("jabber:iq:register");
    registrationForm.addField(field);
    field=new XFormFieldImpl("username");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Username");
    field.setRequired(true);
    registrationForm.addField(field);
    field=new XFormFieldImpl("name");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Full name");
    registrationForm.addField(field);
    field=new XFormFieldImpl("email");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Email");
    registrationForm.addField(field);
    field=new XFormFieldImpl("password");
    field.setType(FormField.TYPE_TEXT_PRIVATE);
    field.setLabel("Password");
    field.setRequired(true);
    registrationForm.addField(field);
    probeResult.add(registrationForm.asXMLElement());
  }
  String inband=JiveGlobals.getProperty("register.inband");
  if (inband == null || "".equals(inband)) {
    setInbandRegEnabled(true);
  }
 else {
    enabled="true".equals(inband);
  }
}
