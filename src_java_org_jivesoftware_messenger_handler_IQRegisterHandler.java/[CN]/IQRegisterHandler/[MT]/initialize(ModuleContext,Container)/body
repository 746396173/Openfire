{
  super.initialize(context,container);
  if (probeResult == null) {
    Element element=DocumentHelper.createElement(QName.get("query","jabber:iq:register"));
    element.addElement("username");
    element.addElement("password");
    element.addElement("email");
    XDataFormImpl registrationForm=new XDataFormImpl(DataForm.TYPE_FORM);
    registrationForm.setTitle("XMPP Client Registration");
    registrationForm.addInstruction("Please provide the following information");
    XFormFieldImpl field=new XFormFieldImpl("FORM_TYPE");
    field.setType(FormField.TYPE_HIDDEN);
    field.addValue("jabber:iq:register");
    registrationForm.addField(field);
    field=new XFormFieldImpl("username");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Username");
    field.setRequired(true);
    registrationForm.addField(field);
    field=new XFormFieldImpl("name");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Full name");
    registrationForm.addField(field);
    field=new XFormFieldImpl("email");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Email");
    registrationForm.addField(field);
    field=new XFormFieldImpl("password");
    field.setType(FormField.TYPE_TEXT_PRIVATE);
    field.setLabel("Password");
    field.setRequired(true);
    registrationForm.addField(field);
    field=new XFormFieldImpl("x-nameVisible");
    field.setType(FormField.TYPE_BOOLEAN);
    field.setLabel("Show name");
    field.addValue("1");
    field.setRequired(true);
    registrationForm.addField(field);
    field=new XFormFieldImpl("x-emailVisible");
    field.setType(FormField.TYPE_BOOLEAN);
    field.setLabel("Show email");
    field.addValue("0");
    field.setRequired(true);
    registrationForm.addField(field);
    probeResult=new MetaDataFragment(element);
    probeResult.addFragment(registrationForm);
  }
  String inband=JiveGlobals.getProperty("register.inband");
  if (inband == null || "".equals(inband)) {
    setInbandRegEnabled(true);
  }
 else {
    enabled="true".equals(inband);
  }
}
