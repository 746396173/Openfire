{
  if (getBody() == null)   return null;
  if (isText()) {
    return getBody();
  }
 else {
    try {
      String encoded=getBodyEncoding().equals(JAVA_BASE64_MIME_TYPE) ? getObjectArrayAsBase64(getBody()) : getObjectArrayAsString(getBody());
      getHeader().removeHeader(AbstractBodyMessageHeader.CONTENT_TYPE);
      getHeader().removeHeader(AbstractMessageHeader.CONTENT_LENGTH);
      getHeader().setContentLength(encoded.length());
      getHeader().setContentType(getBodyEncoding());
      return encoded;
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
