{
  boolean hasRoute=false;
  if (resource != null && resource.equals(username) && anonymousSessions.containsKey(resource)) {
    hasRoute=true;
  }
 else {
    Session session=null;
    SessionMap sessionMap=sessions.get(username);
    if (sessionMap != null) {
      if (resource == null) {
        hasRoute=!sessionMap.isEmpty();
      }
 else {
        if (sessionMap.hasSession(resource)) {
          session=sessionMap.getSession(resource);
        }
      }
    }
    if (session != null && !session.getConnection().isClosed()) {
      hasRoute=session.getConnection().validate();
    }
  }
  return hasRoute;
}
