{
  if (socketProcess != null) {
    if (proxyPort == port) {
      return;
    }
  }
  reset();
  socketProcess=executor.submit(new Runnable(){
    public void run(){
      ServerSocket serverSocket;
      try {
        serverChannel=ServerSocketChannel.open();
        serverSocket=serverChannel.socket();
        serverSocket.bind(new InetSocketAddress(bindInterface,port));
      }
 catch (      IOException e) {
        Log.error("Error binding server socket",e);
        return;
      }
      while (serverSocket.isBound()) {
        final SocketChannel channel;
        try {
          channel=serverChannel.accept();
        }
 catch (        IOException e) {
          if (serverChannel.isOpen()) {
            Log.error("Error accepting proxy connection",e);
            continue;
          }
 else {
            break;
          }
        }
        executor.submit(new Runnable(){
          public void run(){
            try {
              processConnection(channel);
            }
 catch (            IOException ie) {
              Log.error("Error processing file transfer proxy connection",ie);
              try {
                channel.close();
              }
 catch (              IOException e) {
              }
            }
          }
        }
);
      }
    }
  }
);
  proxyPort=port;
}
