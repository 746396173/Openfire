{
  buffer.clear();
  int read=in.read(buffer);
  if (read < 5) {
    throw new IOException("Error reading Socks5 version and command");
  }
  buffer.position(5);
  byte[] addr=new byte[buffer.get(4)];
  buffer.get(addr,0,addr.length);
  return new String(addr);
}
