{
  if ((canOccupantsChangeSubject() && role.getRole().compareTo(MUCRole.Role.visitor) < 0) || MUCRole.Role.moderator == role.getRole()) {
    if (packet.getSubject().equals(subject)) {
      return;
    }
    subject=packet.getSubject();
    MUCPersistenceManager.updateRoomSubject(this);
    packet.setFrom(role.getRoleAddress());
    send(packet);
  }
 else {
    throw new ForbiddenException();
  }
}
