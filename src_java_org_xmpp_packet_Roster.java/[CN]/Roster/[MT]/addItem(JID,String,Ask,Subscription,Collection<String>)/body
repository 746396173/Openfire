{
  if (jid == null) {
    throw new NullPointerException("JID cannot be null");
  }
  if (subscription == null) {
    throw new NullPointerException("Subscription cannot be null");
  }
  Element query=element.element(new QName("query",Namespace.get("jabber:iq:roster")));
  if (query == null) {
    query=element.addElement("query","jabber:iq:roster");
  }
  Element item=null;
  for (Iterator i=query.elementIterator("item"); i.hasNext(); ) {
    Element el=(Element)i.next();
    if (el.attributeValue("jid").equals(jid.toString())) {
      item=el;
    }
  }
  if (item == null) {
    item=query.addElement("item");
  }
  item.addAttribute("jid",jid.toBareJID());
  item.addAttribute("name",name);
  if (ask != null) {
    item.addAttribute("ask",ask.toString());
  }
  item.addAttribute("subscription",subscription.toString());
  for (Iterator i=item.elementIterator("group"); i.hasNext(); ) {
    item.remove((Element)i.next());
  }
  if (groups != null) {
    for (    String group : groups) {
      item.addElement("group").setText(group);
    }
  }
  return new Item(jid,name,ask,subscription,groups);
}
