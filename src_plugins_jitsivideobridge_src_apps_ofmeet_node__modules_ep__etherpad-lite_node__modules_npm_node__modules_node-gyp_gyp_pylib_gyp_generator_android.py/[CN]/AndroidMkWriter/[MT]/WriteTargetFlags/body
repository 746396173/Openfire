def WriteTargetFlags(self, spec, configs, link_deps):
    'Write Makefile code to specify the link flags and library dependencies.\n\n    spec, configs: input from gyp.\n    link_deps: link dependency list; see ComputeDeps()\n    '
    for (configname, config) in sorted(configs.iteritems()):
        ldflags = list(config.get('ldflags', []))
        self.WriteLn('')
        self.WriteList(ldflags, ('LOCAL_LDFLAGS_%s' % configname))
    self.WriteLn('\nLOCAL_LDFLAGS := $(LOCAL_LDFLAGS_$(GYP_CONFIGURATION))')
    libraries = gyp.common.uniquer(spec.get('libraries', []))
    (static_libs, dynamic_libs) = self.ComputeAndroidLibraryModuleNames(libraries)
    static_link_deps = [x[1] for x in link_deps if (x[0] == 'static')]
    shared_link_deps = [x[1] for x in link_deps if (x[0] == 'shared')]
    self.WriteLn('')
    self.WriteList((static_libs + static_link_deps), 'LOCAL_STATIC_LIBRARIES')
    self.WriteLn('# Enable grouping to fix circular references')
    self.WriteLn('LOCAL_GROUP_STATIC_LIBRARIES := true')
    self.WriteLn('')
    self.WriteList((dynamic_libs + shared_link_deps), 'LOCAL_SHARED_LIBRARIES')
