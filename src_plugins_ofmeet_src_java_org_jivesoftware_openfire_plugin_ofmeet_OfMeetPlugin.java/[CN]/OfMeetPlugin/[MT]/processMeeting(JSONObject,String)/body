{
  Log.info("OfMeet Plugin - processMeeting " + username + " "+ meeting);
  try {
    User user=userManager.getUser(username);
    Date start=new Date(meeting.getLong("startTime"));
    Date end=new Date(meeting.getLong("startTime"));
    String name=user.getName();
    String email=user.getEmail();
    String description=meeting.getString("description");
    String title=meeting.getString("title");
    String room=meeting.getString("room");
    String videourl="https://" + XMPPServer.getInstance().getServerInfo().getHostname() + ":"+ JiveGlobals.getProperty("httpbind.port.secure","7443")+ "/ofmeet/?r="+ room;
    String audiourl=videourl + "&novideo=true";
    String template=JiveGlobals.getProperty("ofmeet.email.template","Dear [name],\n\nYou have an online meeting from [start] to [end]\n\n[description]\n\nTo join, please click\n[videourl]\nFor audio only with no webcan, please click\n[audiourl]\n\nAdministrator - [domain]");
    HashMap variables=new HashMap<String,String>();
    if (email != null) {
      variables.put("name",name);
      variables.put("email",email);
      variables.put("start",start.toString());
      variables.put("end",end.toString());
      variables.put("description",description);
      variables.put("title",title);
      variables.put("room",room);
      variables.put("videourl",videourl);
      variables.put("audiourl",audiourl);
      variables.put("domain",XMPPServer.getInstance().getServerInfo().getXMPPDomain());
      sendEmail(name,email,title,replaceTokens(template,variables),null);
      SecurityAuditManager.getInstance().logEvent(user.getUsername(),"sent email - " + title,description);
    }
  }
 catch (  Exception e) {
    Log.error("processMeeting error",e);
  }
}
