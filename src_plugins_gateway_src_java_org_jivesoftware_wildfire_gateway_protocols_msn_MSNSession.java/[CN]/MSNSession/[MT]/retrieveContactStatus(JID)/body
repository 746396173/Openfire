{
  if (isLoggedIn()) {
    MsnContact msnContact=msnContacts.get(getTransport().convertJIDToID(jid));
    Presence p=new Presence();
    p.setTo(getJID());
    if (msnContact != null) {
      p.setFrom(getTransport().convertIDToJID(msnContact.getEmail().toString()));
      ((MSNTransport)getTransport()).setUpPresencePacket(p,msnContact.getStatus());
    }
 else {
      p.setFrom(jid);
      p.setError(PacketError.Condition.forbidden);
    }
    getTransport().sendPacket(p);
  }
}
