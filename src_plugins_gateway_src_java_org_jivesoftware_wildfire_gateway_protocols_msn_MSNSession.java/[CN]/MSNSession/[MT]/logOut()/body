{
  if (this.isLoggedIn()) {
    setLoginStatus(TransportLoginStatus.LOGGING_OUT);
    msnMessenger.logout();
  }
  if (getTransport().getLegacyMode()) {
    Presence p=new Presence(Presence.Type.unavailable);
    p.setTo(getJID());
    p.setFrom(getTransport().getJID());
    getTransport().sendPacket(p);
  }
  setLoginStatus(TransportLoginStatus.LOGGED_OUT);
}
