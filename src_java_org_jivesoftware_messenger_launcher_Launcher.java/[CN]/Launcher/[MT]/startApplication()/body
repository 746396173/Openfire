{
  if (messengerd == null) {
    File libDir=null;
    File exe=null;
    try {
      libDir=new File("").getAbsoluteFile();
      File parentDir=libDir.getParentFile();
      if ("lib".equals(libDir.getName())) {
        exe=new File(parentDir,"messenger.exe");
        if (exe.exists()) {
          messengerd=Runtime.getRuntime().exec(new String[]{exe.toString()});
        }
 else {
          exe=new File(parentDir,"messenger.app");
          if (exe.exists()) {
            messengerd=Runtime.getRuntime().exec(new String[]{"open",exe.toString()});
          }
 else {
            exe=new File(parentDir,"messenger");
            if (exe.exists()) {
              messengerd=Runtime.getRuntime().exec(new String[]{exe.toString()});
            }
 else {
              throw new FileNotFoundException();
            }
          }
        }
      }
    }
 catch (    Exception e) {
      try {
        if (libDir != null) {
          messengerd=Runtime.getRuntime().exec(new String[]{"java","-jar",new File(libDir,"startup.jar").toString()});
        }
 else {
          e.printStackTrace();
          JOptionPane.showMessageDialog(null,"Launcher could not locate messengerd,\nthe Jive Messenger server daemon executable","File not found",JOptionPane.ERROR_MESSAGE);
        }
      }
 catch (      Exception ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(null,"Launcher could not locate messengerd,\nthe Jive Messenger server daemon executable","File not found",JOptionPane.ERROR_MESSAGE);
      }
    }
  }
}
