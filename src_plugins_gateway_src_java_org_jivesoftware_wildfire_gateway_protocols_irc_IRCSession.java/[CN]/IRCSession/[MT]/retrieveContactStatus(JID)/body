{
  String contact=getTransport().convertJIDToID(jid);
  Presence p=new Presence();
  if (buddyStatuses.containsKey(contact)) {
    if (buddyStatuses.get(contact).equals(PresenceType.unavailable)) {
      p.setType(Presence.Type.unavailable);
    }
  }
 else {
    p.setError(PacketError.Condition.forbidden);
  }
  p.setTo(jid);
  p.setFrom(getTransport().convertIDToJID(contact));
  getTransport().sendPacket(p);
}
