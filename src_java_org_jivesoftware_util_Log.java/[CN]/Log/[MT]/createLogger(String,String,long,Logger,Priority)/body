{
  ExtendedPatternFormatter formatter=new ExtendedPatternFormatter(pattern);
  StreamTarget target=null;
  Exception ioe=null;
  try {
    if (logName == null) {
      throw new IOException("LogName was null - JiveHome not set?");
    }
 else {
      RevolvingFileStrategy fileStrategy=new RevolvingFileStrategy(logName,5);
      RotateStrategyBySize rotateStrategy=new RotateStrategyBySize(maxLogSize * 1024);
      target=new RotatingFileTarget(formatter,rotateStrategy,fileStrategy);
    }
  }
 catch (  IOException e) {
    ioe=e;
    target=new StreamTarget(System.err,formatter);
  }
  logger.setLogTargets(new LogTarget[]{target});
  logger.setPriority(priority);
  if (ioe != null) {
    logger.debug("Error occurred opening log file: " + ioe.getMessage());
  }
}
