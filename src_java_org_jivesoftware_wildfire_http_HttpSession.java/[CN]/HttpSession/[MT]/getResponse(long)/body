{
  for (  HttpConnection connection : connectionQueue) {
    if (connection.getRequestId() == requestID) {
      if (requestID > lastRequestID) {
        lastRequestID=connection.getRequestId();
      }
      String response=getResponse(connection);
      connectionQueue.remove(connection);
      fireConnectionClosed(connection);
      return response;
    }
  }
  throw new InternalError("Could not locate connection: " + requestID);
}
