{
  String deliverable=createDeliverable(Arrays.asList(stanza));
  boolean delivered=false;
  while (!delivered && connectionQueue.size() > 0) {
    HttpConnection connection=connectionQueue.remove();
    try {
      deliver(connection,deliverable);
      delivered=true;
      fireConnectionClosed(connection);
    }
 catch (    HttpConnectionClosedException e) {
    }
  }
  if (!delivered) {
    pendingElements.add(stanza);
  }
}
