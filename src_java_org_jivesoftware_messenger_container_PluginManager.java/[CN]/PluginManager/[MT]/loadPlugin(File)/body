{
  if (setupMode && !(pluginDir.getName().equals("admin"))) {
    return;
  }
  Log.debug("Loading plugin " + pluginDir.getName());
  Module mod=null;
  try {
    File moduleConfig=new File(pluginDir,"module.xml");
    if (moduleConfig.exists()) {
      XMLProperties moduleProps=new XMLProperties(moduleConfig);
      JiveModuleLoader modLoader=new JiveModuleLoader(pluginDir.toString());
      mod=modLoader.loadModule(moduleProps.getProperty("module"));
      mod.initialize(container);
      mod.start();
      plugins.put(pluginDir.getName(),mod);
    }
 else {
      Log.warn("Plugin " + pluginDir + " not loaded: no module.xml configuration file not found");
    }
  }
 catch (  Exception e) {
    Log.error("Error loading plugin",e);
  }
}
