{
  Log.debug("Unloading plugin " + pluginName);
  Plugin plugin=plugins.get(pluginName);
  if (plugin == null) {
    return;
  }
  File webXML=new File(pluginDirectory + File.separator + pluginName+ File.separator+ "web"+ File.separator+ "web.xml");
  if (webXML.exists()) {
    AdminConsole.removeModel(pluginName);
    PluginServlet.unregisterServlets(webXML);
  }
  PluginClassLoader classLoader=classloaders.get(plugin);
  plugin.destroyPlugin();
  classLoader.destroy();
  plugins.remove(pluginName);
  pluginDirs.remove(plugin);
  classloaders.remove(plugin);
}
