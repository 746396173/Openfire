{
  logger.info("Chat room event " + evt);
  logger.info("Participants count: " + evt.getChatRoom().getMembersCount());
  ChatRoomMember sourceMember=evt.getChatRoomMember();
  String eventType=evt.getEventType();
  if (ChatRoomMemberPresenceChangeEvent.MEMBER_JOINED.equals(eventType)) {
    if (moderator == null) {
      electNewModerator();
    }
    conference.onMemberJoined(sourceMember);
  }
 else   if (ChatRoomMemberPresenceChangeEvent.MEMBER_LEFT.equals(eventType) || ChatRoomMemberPresenceChangeEvent.MEMBER_KICKED.equals(eventType) || ChatRoomMemberPresenceChangeEvent.MEMBER_QUIT.equals(eventType)) {
    if (moderator == sourceMember) {
      logger.info("Moderator has left hte room !");
      moderator=null;
      electNewModerator();
    }
    if (ChatRoomMemberPresenceChangeEvent.MEMBER_KICKED.equals(eventType)) {
      conference.onMemberKicked(sourceMember);
    }
 else {
      conference.onMemberLeft(sourceMember);
    }
  }
 else {
    logger.warn("Unhandled event: " + evt.getEventType());
  }
}
