{
  XMPPPacket packet=createServerMessage(subject,body);
  try {
    if (address == null || address.getName() == null || address.getName().length() < 1) {
      broadcast(packet);
    }
 else     if (address.getResource() == null || address.getResource().length() < 1) {
      userBroadcast(address.getName(),packet);
    }
 else {
      getSession(address).getConnection().deliver(packet);
    }
  }
 catch (  Exception e) {
  }
}
