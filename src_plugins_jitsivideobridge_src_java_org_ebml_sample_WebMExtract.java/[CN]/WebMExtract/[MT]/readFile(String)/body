{
  System.out.println("Scanning file: " + filename);
  long startTime=System.currentTimeMillis();
  FileDataSource iFS=new FileDataSource(filename);
  MatroskaFile mF=new MatroskaFile(iFS);
  mF.setScanFirstCluster(true);
  mF.readFile();
  System.out.println(mF.getReport());
  MatroskaFileTrack track=null;
  for (  MatroskaFileTrack t : mF.getTrackList()) {
    if (t.CodecID.compareTo("V_VP8") == 0)     track=t;
  }
  if (track != null) {
    MatroskaFileFrame frame=mF.getNextFrame(track.TrackNo);
    int count=0;
    while (frame != null) {
      if (frame.isKeyFrame()) {
        System.out.println("Extracting VP8 frame " + count);
        String outputFilename=filename + "" + count+ ".webp";
        FileOutputStream oFS=new FileOutputStream(outputFilename);
        oFS.write("RIFF".getBytes());
        writeIntLE(oFS,frame.Data.length + 20 - 8);
        oFS.write("WEBPVP8".getBytes());
        oFS.write(0x20);
        writeIntLE(oFS,(frame.Data.length + 20 - 8) - 0xc);
        oFS.write(frame.Data);
      }
      frame=mF.getNextFrame(track.TrackNo);
      count++;
    }
  }
  long endTime=System.currentTimeMillis();
  System.out.println("Scan complete. Took: " + ((endTime - startTime) / 1000.0) + " seconds");
}
