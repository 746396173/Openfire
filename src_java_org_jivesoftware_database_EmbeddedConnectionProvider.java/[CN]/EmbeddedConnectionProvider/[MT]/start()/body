{
synchronized (initLock) {
    try {
      String driver="org.hsqldb.jdbcDriver";
      File databaseDir=new File(JiveGlobals.getHomeDirectory(),File.separator + "embedded-db");
      if (!databaseDir.exists()) {
        databaseDir.mkdirs();
      }
      String serverURL="jdbc:hsqldb:" + databaseDir.getCanonicalPath() + File.separator+ "openfire";
      String username="sa";
      String password="";
      int minConnections=3;
      int maxConnections=25;
      double connectionTimeout=0.5;
      connectionPool=new ConnectionPool(driver,serverURL,username,password,minConnections,maxConnections,connectionTimeout,false);
    }
 catch (    IOException ioe) {
      Log.error("Error starting connection pool.",ioe);
    }
  }
}
