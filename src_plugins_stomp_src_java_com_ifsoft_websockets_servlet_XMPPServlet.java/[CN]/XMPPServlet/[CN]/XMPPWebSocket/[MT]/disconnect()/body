{
  Log.info(digest + " : disconnect : XMPPWebSocket disconnect");
  Log.info("Total websockets created : " + sockets.size());
  try {
    if (wsSession != null && wsSession.isOpen()) {
      wsSession.close();
    }
  }
 catch (  Exception e) {
    try {
      wsSession.disconnect();
    }
 catch (    Exception e1) {
    }
  }
  try {
    sockets.remove(digest);
    SessionManager.getInstance().removeSession(xmppSession);
  }
 catch (  Exception e) {
    Log.error("An error has occurred",e);
  }
  xmppSession=null;
}
