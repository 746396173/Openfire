{
  super.handleSnacResponse(e);
  SnacCommand cmd=e.getSnacCommand();
  if (cmd instanceof LocRightsCmd) {
    request(new SetInfoCmd(new InfoData("oscargateway",null,MY_CAPS,null)));
    request(new MyInfoRequest());
  }
 else   if (cmd instanceof ParamInfoCmd) {
    ParamInfoCmd pic=(ParamInfoCmd)cmd;
    ParamInfo info=pic.getParamInfo();
    request(new SetParamInfoCmd(new ParamInfo(0,info.getFlags() | ParamInfo.FLAG_TYPING_NOTIFICATION,8000,info.getMaxSenderWarning(),info.getMaxReceiverWarning(),0)));
  }
 else   if (cmd instanceof ServiceRedirect) {
    ServiceRedirect sr=(ServiceRedirect)cmd;
    oscarSession.connectToService(sr.getSnacFamily(),sr.getRedirectHost(),sr.getCookie());
  }
 else   if (cmd instanceof SsiDataCmd) {
    SsiDataCmd sdc=(SsiDataCmd)cmd;
    List<SsiItem> items=sdc.getItems();
    for (    SsiItem item : items) {
      SsiItemObj obj=itemFactory.getItemObj(item);
      if (obj instanceof BuddyItem) {
        Log.debug("AIM got buddy item " + obj);
        oscarSession.gotBuddy((BuddyItem)obj);
      }
 else       if (obj instanceof GroupItem) {
        Log.debug("AIM got group item " + obj);
        oscarSession.gotGroup((GroupItem)obj);
      }
    }
    if (sdc.getLastModDate() != 0) {
      request(new ActivateSsiCmd());
      clientReady();
      oscarSession.gotCompleteSSI();
    }
  }
}
