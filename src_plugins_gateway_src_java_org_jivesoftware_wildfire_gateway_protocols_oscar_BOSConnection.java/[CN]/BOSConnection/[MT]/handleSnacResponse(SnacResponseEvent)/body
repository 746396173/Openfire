{
  super.handleSnacResponse(e);
  Log.debug("OSCAR bos snac response received: " + e);
  SnacCommand cmd=e.getSnacCommand();
  if (cmd instanceof LocRightsCmd) {
    request(new SetInfoCmd(new InfoData("oscargateway",null,MY_CAPS,null)));
    request(new MyInfoRequest());
  }
 else   if (cmd instanceof ParamInfoCmd) {
    ParamInfoCmd pic=(ParamInfoCmd)cmd;
    ParamInfo info=pic.getParamInfo();
    request(new SetParamInfoCmd(new ParamInfo(0,info.getFlags() | ParamInfo.FLAG_TYPING_NOTIFICATION,8000,info.getMaxSenderWarning(),info.getMaxReceiverWarning(),0)));
  }
 else   if (cmd instanceof ServiceRedirect) {
    ServiceRedirect sr=(ServiceRedirect)cmd;
    oscarSession.connectToService(sr.getSnacFamily(),sr.getRedirectHost(),sr.getCookie());
  }
 else   if (cmd instanceof SsiDataCmd) {
    SsiDataCmd sdc=(SsiDataCmd)cmd;
    List<SsiItem> items=sdc.getItems();
    for (    SsiItem item : items) {
      SsiItemObj obj=itemFactory.getItemObj(item);
      if (obj instanceof BuddyItem) {
        Log.debug("AIM got buddy item " + obj);
        oscarSession.gotBuddy((BuddyItem)obj);
      }
 else       if (obj instanceof GroupItem) {
        Log.debug("AIM got group item " + obj);
        oscarSession.gotGroup((GroupItem)obj);
      }
    }
    if (sdc.getLastModDate() != 0) {
      request(new ActivateSsiCmd());
      clientReady();
      Presence p=new Presence();
      p.setTo(oscarSession.getJID());
      p.setFrom(oscarSession.getTransport().getJID());
      oscarSession.getTransport().sendPacket(p);
      oscarSession.setLoginStatus(TransportLoginStatus.LOGGED_IN);
      oscarSession.gotCompleteSSI();
    }
  }
 else   if (cmd instanceof OfflineMsgIcqCmd) {
    Log.debug("Found offline message:" + cmd);
    OfflineMsgIcqCmd omic=(OfflineMsgIcqCmd)cmd;
    String sn=String.valueOf(omic.getFromUIN());
    String msg="Offline message received:\n" + OscarTools.stripHtml(omic.getContents()).trim();
    oscarSession.getTransport().sendMessage(oscarSession.getJIDWithHighestPriority(),oscarSession.getTransport().convertIDToJID(sn),msg);
  }
 else   if (cmd instanceof OfflineMsgDoneCmd) {
    request(new OfflineMsgIcqAckCmd(oscarSession.getUIN(),(int)oscarSession.nextIcqId()));
  }
}
