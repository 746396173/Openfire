{
  JID jid=new JID(addedUser,XMPPServer.getInstance().getServerInfo().getName(),"");
  try {
    RosterItem item=getRosterItem(jid);
    item.addSharedGroup(sharedGroup);
    broadcast(item);
  }
 catch (  UserNotFoundException e) {
    try {
      User user=UserManager.getInstance().getUser(addedUser);
      RosterItem item=new RosterItem(jid,RosterItem.SUB_BOTH,RosterItem.ASK_NONE,RosterItem.RECV_NONE,user.getName(),null);
      item.addSharedGroup(sharedGroup);
      rosterItems.put(item.getJid().toBareJID(),item);
      broadcast(item);
    }
 catch (    UserNotFoundException ex) {
      Log.error("Group (" + sharedGroup + ") includes non-existent username ("+ addedUser+ ")");
    }
  }
}
