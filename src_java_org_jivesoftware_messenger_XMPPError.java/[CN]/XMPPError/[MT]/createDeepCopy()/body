{
  XMPPError error=new XMPPError(code);
  Iterator frags=getFragments();
  while (frags.hasNext()) {
    error.addFragment((XMPPFragment)frags.next());
  }
  return error;
}
