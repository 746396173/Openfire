{
  HttpSession session=(HttpSession)request.getAttribute("request-session");
  if (session == null) {
    return false;
  }
synchronized (session) {
    try {
      respond(response,session.getResponse((Long)request.getAttribute("request")),request.getMethod());
    }
 catch (    HttpBindException e) {
      response.sendError(e.getHttpError(),e.getMessage());
      if (e.shouldCloseSession()) {
        session.close();
      }
    }
  }
  return true;
}
