{
  locateOpenfire();
  startDate=new Date();
  try {
    host=InetAddress.getLocalHost().getHostName();
  }
 catch (  UnknownHostException ex) {
    Log.warn("Unable to determine local hostname.",ex);
  }
  if (host == null) {
    host="127.0.0.1";
  }
  version=new Version(3,9,3,Version.ReleaseStatus.Alpha,-1);
  if ("true".equals(JiveGlobals.getXMLProperty("setup"))) {
    setupMode=false;
  }
  if (isStandAlone()) {
    Log.info("Registering shutdown hook (standalone mode)");
    Runtime.getRuntime().addShutdownHook(new ShutdownHookThread());
    TaskEngine.getInstance().schedule(new Terminator(),1000,1000);
  }
  loader=Thread.currentThread().getContextClassLoader();
  try {
    CacheFactory.initialize();
  }
 catch (  InitializationException e) {
    e.printStackTrace();
    Log.error(e.getMessage(),e);
  }
  JiveGlobals.migrateProperty("xmpp.domain");
  name=JiveGlobals.getProperty("xmpp.domain",host).toLowerCase();
  org.jivesoftware.util.Log.setDebugEnabled(JiveGlobals.getXMLProperty("log.debug.enabled",false));
  xmppServerInfo=new XMPPServerInfoImpl(name,host,version,startDate);
  initialized=true;
}
