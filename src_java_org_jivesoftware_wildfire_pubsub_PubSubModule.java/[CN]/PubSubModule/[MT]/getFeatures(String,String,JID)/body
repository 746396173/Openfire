{
  ArrayList<String> features=new ArrayList<String>();
  if (name == null && node == null) {
    features.add("http://jabber.org/protocol/pubsub");
    features.add("http://jabber.org/protocol/pubsub#collections");
    features.add("http://jabber.org/protocol/pubsub#config-node");
    features.add("http://jabber.org/protocol/pubsub#config-node");
    features.add("http://jabber.org/protocol/pubsub#create-nodes");
    features.add("http://jabber.org/protocol/pubsub#delete-any");
    features.add("http://jabber.org/protocol/pubsub#delete-nodes");
    features.add("http://jabber.org/protocol/pubsub#instant-nodes");
    features.add("http://jabber.org/protocol/pubsub#item-ids");
    features.add("http://jabber.org/protocol/pubsub#meta-data");
    features.add("http://jabber.org/protocol/pubsub#multi-subscribe");
    features.add("http://jabber.org/protocol/pubsub#outcast-affiliation");
    features.add("http://jabber.org/protocol/pubsub#persistent-items");
    features.add("http://jabber.org/protocol/pubsub#presence-notifications");
    features.add("http://jabber.org/protocol/pubsub#publisher-affiliation");
    features.add("http://jabber.org/protocol/pubsub#purge-nodes");
    features.add("http://jabber.org/protocol/pubsub#retract-items");
    features.add("http://jabber.org/protocol/pubsub#retrieve-affiliations");
    features.add("http://jabber.org/protocol/pubsub#retrieve-items");
    features.add("http://jabber.org/protocol/pubsub#subscribe");
    features.add("http://jabber.org/protocol/pubsub#subscription-options");
  }
 else   if (name == null && node != null) {
    Node pubNode=getNode(node);
    if (node != null && canDiscoverNode(pubNode)) {
      features.add("http://jabber.org/protocol/pubsub");
    }
  }
  return features.iterator();
}
