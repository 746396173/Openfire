{
  int propid=event.getProperty();
  if (propid == Contact.STATUS) {
    String newstatus=(String)event.getNewValue();
    Presence p=new Presence();
    p.setTo(msnSession.getJID());
    p.setFrom(msnSession.getTransport().convertIDToJID(event.getUserName()));
    if (newstatus.equals(ContactStatus.ONLINE)) {
    }
 else     if (newstatus.equals(ContactStatus.AWAY)) {
      p.setShow(Presence.Show.away);
    }
 else     if (newstatus.equals(ContactStatus.BE_RIGHT_BACK)) {
      p.setShow(Presence.Show.away);
    }
 else     if (newstatus.equals(ContactStatus.BUSY)) {
      p.setShow(Presence.Show.dnd);
    }
 else     if (newstatus.equals(ContactStatus.IDLE)) {
      p.setShow(Presence.Show.away);
    }
 else     if (newstatus.equals(ContactStatus.OFFLINE)) {
      p.setType(Presence.Type.unavailable);
    }
 else     if (newstatus.equals(ContactStatus.ON_THE_PHONE)) {
      p.setShow(Presence.Show.dnd);
    }
 else     if (newstatus.equals(ContactStatus.OUT_TO_LUNCH)) {
      p.setShow(Presence.Show.xa);
    }
    msnSession.getTransport().sendPacket(p);
  }
}
