{
  try {
    final SSLEngine sslEngine;
    if (clientMode) {
      sslEngine=SSLConfig.getClientModeSSLEngine(Purpose.SOCKET_S2S);
    }
 else {
      final Purpose purpose=isPeerClient ? Purpose.SOCKET_C2S : Purpose.SOCKET_S2S;
      sslEngine=SSLConfig.getServerModeSSLEngine(purpose,clientAuth);
    }
    final SSLSession sslSession=sslEngine.getSession();
    netBuffSize=sslSession.getPacketBufferSize();
    appBuffSize=sslSession.getApplicationBufferSize();
  }
 catch (  NoSuchAlgorithmException|KeyManagementException|KeyStoreException ex) {
    Log.error("TLSHandler startup problem. SSLContext initialisation failed.",ex);
  }
}
