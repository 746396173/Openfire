{
  if (pluginName == null) {
    return getLocalizedString(key,arguments);
  }
  Locale locale=JiveGlobals.getLocale();
  String i18nFile=pluginName + "_i18n";
  final XMPPServer xmppServer=XMPPServer.getInstance();
  PluginManager pluginManager=xmppServer.getPluginManager();
  Plugin plugin=pluginManager.getPlugin(pluginName);
  if (plugin == null) {
    throw new NullPointerException("Plugin could not be located: " + pluginName);
  }
  ClassLoader pluginClassLoader=pluginManager.getPluginClassloader(plugin).getClassLoader();
  try {
    ResourceBundle bundle=ResourceBundle.getBundle(i18nFile,locale,pluginClassLoader);
    return getLocalizedString(key,locale,arguments,bundle);
  }
 catch (  MissingResourceException mre) {
    Log.error(mre);
    return key;
  }
}
