{
  if (permissions.hasPermission(Permissions.SYSTEM_ADMIN | Permissions.USER_ADMIN)) {
    Iterator iter=roster.getRosterItems();
    ArrayList items=new ArrayList();
    while (iter.hasNext()) {
      RosterItem item=(RosterItem)iter.next();
      if (permissions.hasPermission(Permissions.SYSTEM_ADMIN | Permissions.USER_ADMIN)) {
        if (!(item instanceof RosterItemProxy)) {
          item=new RosterItemProxy(item,authToken,permissions);
        }
        items.add(item);
      }
    }
    return items.iterator();
  }
 else {
    throw new UnauthorizedException();
  }
}
