{
  if (valve.isOpen()) {
    while (!queue.isEmpty()) {
      this.componentManager.sendPacket(this.component,queue.poll());
    }
    this.componentManager.sendPacket(this.component,packet);
  }
 else {
    queue.add(packet);
    Log.debug(LocaleUtils.getLocalizedString("jabberendpoint.sendpacketenqueue","gateway",Arrays.asList(packet.getFrom())));
  }
}
