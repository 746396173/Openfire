{
  if (shutdownStarted) {
    return null;
  }
  ConnectionWrapper wrapper=getCon();
  if (wrapper != null) {
synchronized (wrapper) {
      wrapper.checkedout=true;
      wrapper.lockTime=System.currentTimeMillis();
    }
    return wrapper;
  }
 else {
synchronized (waitLock) {
      try {
        waitingForCon++;
        while (true) {
          wrapper=getCon();
          if (wrapper != null) {
            --waitingForCon;
synchronized (wrapper) {
              wrapper.checkedout=true;
              wrapper.lockTime=System.currentTimeMillis();
            }
            return wrapper;
          }
 else {
            waitLock.wait();
          }
        }
      }
 catch (      InterruptedException ex) {
        --waitingForCon;
        waitLock.notifyAll();
        throw new SQLException("Interrupted while waiting for connection to " + "become available.");
      }
    }
  }
}
