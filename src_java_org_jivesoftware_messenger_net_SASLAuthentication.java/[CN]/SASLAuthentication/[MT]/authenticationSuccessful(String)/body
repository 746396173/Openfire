{
  connection.deliverRawText("<success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"/>");
  if (session instanceof ClientSession) {
    ((ClientSession)session).setAuthToken(new AuthToken(username));
  }
 else   if (session instanceof IncomingServerSession) {
    String hostname=username;
    session.setAddress(new JID(null,hostname,null));
    ((IncomingServerSession)session).addValidatedDomain(hostname);
  }
}
