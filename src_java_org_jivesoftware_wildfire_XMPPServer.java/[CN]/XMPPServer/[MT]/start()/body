{
  try {
    initialize();
    File pluginDir=new File(wildfireHome,"plugins");
    pluginManager=new PluginManager(pluginDir);
    if (!setupMode) {
      verifyDataSource();
      loadModules();
      initModules();
      startModules();
    }
    ServerTrafficCounter.initStatistics();
    pluginManager.addPluginListener(new PluginListener(){
      public void pluginCreated(      String pluginName,      Plugin plugin){
        if ("admin".equals(pluginName)) {
          httpServerManager.startup();
        }
      }
      public void pluginDestroyed(      String pluginName,      Plugin plugin){
        if ("admin".equals(pluginName)) {
          httpServerManager.shutdown();
        }
      }
    }
);
    pluginManager.start();
    List<String> params=new ArrayList<String>();
    params.add(version.getVersionString());
    params.add(JiveGlobals.formatDateTime(new Date()));
    String startupBanner=LocaleUtils.getLocalizedString("startup.name",params);
    Log.info(startupBanner);
    System.out.println(startupBanner);
    startDate=new Date();
    stopDate=null;
    for (    XMPPServerListener listener : listeners) {
      listener.serverStarted();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    Log.error(e);
    System.out.println(LocaleUtils.getLocalizedString("startup.error"));
    shutdownServer();
  }
}
