{
  parseRootAttributes(xpp);
  Document doc=null;
  try {
    doc=XPPReader.parseDocument(xpp);
    Element root=doc.getRootElement();
    Iterator frags=root.elementIterator();
    while (frags.hasNext()) {
      Element element=(Element)frags.next();
      String name=element.getName();
      if ("body".equals(name)) {
        body=element.getText();
      }
 else       if ("thread".equals(name)) {
        thread=element.getTextTrim();
      }
 else       if ("subject".equals(name)) {
        subject=element.getTextTrim();
      }
 else       if ("error".equals(name)) {
        setType(ERROR);
      }
 else {
        addFragment(new XMPPDOMFragment(element));
      }
    }
  }
 catch (  Exception e) {
    Log.error(LocaleUtils.getLocalizedString("admin.error"),e);
  }
}
