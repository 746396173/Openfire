{
  super.sendRoot(xmlSerializer,version,"message",Message.NORMAL);
  if (subject != null && subject.length() > 0) {
    xmlSerializer.writeStartElement("jabber:client","subject");
    xmlSerializer.writeCharacters(subject);
    xmlSerializer.writeEndElement();
  }
  if (thread != null && thread.length() > 0) {
    xmlSerializer.writeStartElement("jabber:client","thread");
    xmlSerializer.writeCharacters(thread);
    xmlSerializer.writeEndElement();
  }
  if (body != null && body.length() > 0) {
    xmlSerializer.writeStartElement("jabber:client","body");
    xmlSerializer.writeCharacters(body);
    xmlSerializer.writeEndElement();
  }
  Iterator frags=getFragments();
  while (frags.hasNext()) {
    ((XMPPFragment)frags.next()).send(xmlSerializer,version);
  }
  xmlSerializer.writeEndElement();
}
