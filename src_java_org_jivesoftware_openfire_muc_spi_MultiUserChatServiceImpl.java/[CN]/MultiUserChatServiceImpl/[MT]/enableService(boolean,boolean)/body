{
  if (isServiceEnabled() == enabled) {
    return;
  }
  XMPPServer server=XMPPServer.getInstance();
  if (!enabled) {
    server.getIQDiscoItemsHandler().removeServerItemsProvider(this);
    stop();
  }
  if (persistent) {
    MUCPersistenceManager.setProperty(chatServiceName,"enabled",Boolean.toString(enabled));
  }
  serviceEnabled=enabled;
  if (enabled) {
    start();
    server.getIQDiscoItemsHandler().addServerItemsProvider(this);
  }
}
