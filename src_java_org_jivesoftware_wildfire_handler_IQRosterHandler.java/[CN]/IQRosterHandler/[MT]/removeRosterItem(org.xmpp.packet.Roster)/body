{
  JID recipientJID=packet.getTo();
  JID senderJID=packet.getFrom();
  try {
    for (    org.xmpp.packet.Roster.Item packetItem : packet.getItems()) {
      if (packetItem.getSubscription() == org.xmpp.packet.Roster.Subscription.remove) {
        Roster roster=userManager.getUser(recipientJID.getNode()).getRoster();
        RosterItem item=roster.getRosterItem(senderJID);
        roster.deleteRosterItem(senderJID,true);
        item.setSubStatus(RosterItem.SUB_REMOVE);
        item.setSubStatus(RosterItem.SUB_NONE);
        Packet itemPacket=packet.createCopy();
        sessionManager.userBroadcast(recipientJID.getNode(),itemPacket);
      }
    }
  }
 catch (  UserNotFoundException e) {
    throw new UnauthorizedException(e);
  }
}
