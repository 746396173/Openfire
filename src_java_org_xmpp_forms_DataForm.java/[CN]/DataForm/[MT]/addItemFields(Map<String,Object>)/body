{
  Element item=element.addElement("item");
  for (  String var : fields.keySet()) {
    Element field=item.addElement("field");
    field.addAttribute("var",var);
    Object value=fields.get(var);
    if (value instanceof Collection) {
      for (Iterator it=((Collection)value).iterator(); it.hasNext(); ) {
        field.addElement("value").setText(encode(it.next()));
      }
    }
 else {
      field.addElement("value").setText(encode(value));
    }
  }
}
