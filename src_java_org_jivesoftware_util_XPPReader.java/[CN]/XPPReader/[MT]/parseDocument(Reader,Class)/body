{
  if (xmlFactory == null) {
    xmlFactory=XMLInputFactory.newInstance();
    xmlFactory.setProperty(XMLInputFactory.IS_COALESCING,Boolean.TRUE);
  }
  XMLStreamReader xpp=xmlFactory.createXMLStreamReader(input);
  Document document=DocumentHelper.createDocument();
  for (int event=xpp.next(); event != XMLStreamConstants.START_ELEMENT; event=xpp.next()) {
    if (event == XMLStreamConstants.COMMENT) {
      document.addComment(xpp.getText());
    }
  }
  document=parseDocument(xpp,document);
  return document;
}
