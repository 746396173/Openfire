{
  pluginManager=manager;
  componentManager=ComponentManagerFactory.getComponentManager();
  try {
    componentManager.addComponent(SERVICE_NAME,this);
  }
 catch (  Exception e) {
    componentManager.getLog().error(e);
  }
  if (probeResult == null) {
    probeResult=DocumentHelper.createElement(QName.get("query","jabber:iq:search"));
    probeResult.addElement("instructions").addText(instructions);
    XDataFormImpl searchForm=new XDataFormImpl(DataForm.TYPE_FORM);
    searchForm.setTitle("User Search");
    searchForm.addInstruction(instructions);
    XFormFieldImpl field=new XFormFieldImpl("search");
    field.setType(FormField.TYPE_TEXT_SINGLE);
    field.setLabel("Search");
    field.setRequired(false);
    searchForm.addField(field);
    Iterator iter=searchFields.iterator();
    while (iter.hasNext()) {
      String searchField=(String)iter.next();
      probeResult.addElement(searchField.toLowerCase());
      field=new XFormFieldImpl(searchField);
      field.setType(FormField.TYPE_BOOLEAN);
      field.addValue("1");
      field.setLabel(searchField);
      field.setRequired(false);
      searchForm.addField(field);
    }
    probeResult.add(searchForm.asXMLElement());
  }
}
