{
  if (isClosed()) {
    deliverer.deliver(packet);
  }
 else {
synchronized (writer) {
      try {
        xmlSerializer.write(packet.getElement());
        xmlSerializer.flush();
      }
 catch (      IOException e) {
        Log.error(e);
      }
    }
    auditor.audit(packet);
    session.incrementServerPacketCount();
  }
}
