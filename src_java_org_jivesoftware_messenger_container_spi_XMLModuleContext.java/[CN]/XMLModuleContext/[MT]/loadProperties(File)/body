{
  if (properties == null) {
    try {
      properties=new XMLProperties(filename.toString());
    }
 catch (    IOException ioe) {
      Log.error(ioe);
      return;
    }
  }
  if (locale == null) {
    String language=getDefaultProperty("locale.language","");
    String country=getDefaultProperty("locale.country","");
    if ("".equals(language) && "".equals(country)) {
      locale=Locale.getDefault();
    }
 else {
      locale=new Locale(language,country);
    }
    characterEncoding=getDefaultProperty("locale.characterEncoding","ISO-8859-1");
    String timeZoneID=getDefaultProperty("locale.timeZone",TimeZone.getDefault().getID());
    timeZone=TimeZone.getTimeZone(timeZoneID);
    dateFormat=DateFormat.getDateInstance(DateFormat.MEDIUM,locale);
    dateTimeFormat=DateFormat.getDateTimeInstance(DateFormat.MEDIUM,DateFormat.MEDIUM,locale);
    dateFormat.setTimeZone(timeZone);
    dateTimeFormat.setTimeZone(timeZone);
  }
}
