{
  Log.debug("Unregistering component for domain: " + subdomain);
  Component component=components.remove(subdomain);
  componentInfo.remove(subdomain);
  JID componentJID=new JID(subdomain + "." + serverDomain);
  if (XMPPServer.getInstance().getRoutingTable() != null) {
    XMPPServer.getInstance().getRoutingTable().removeRoute(componentJID);
  }
  if (XMPPServer.getInstance().getIQDiscoItemsHandler() != null) {
    XMPPServer.getInstance().getIQDiscoItemsHandler().removeComponentItem(componentJID.toBareJID());
  }
  if (component != null) {
    component.shutdown();
  }
  for (  ComponentEventListener listener : listeners) {
    listener.componentUnregistered(component,componentJID);
  }
  Log.debug("Component unregistered for domain: " + subdomain);
}
