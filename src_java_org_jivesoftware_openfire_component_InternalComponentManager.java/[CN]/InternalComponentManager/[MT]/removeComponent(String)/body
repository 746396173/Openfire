{
  Log.debug("Unregistering component for domain: " + subdomain);
  Component component=components.remove(subdomain);
  componentInfo.remove(subdomain);
  JID componentJID=new JID(subdomain + "." + serverDomain);
  RoutingTable routingTable=XMPPServer.getInstance().getRoutingTable();
  if (routingTable != null) {
    routingTable.removeComponentRoute(componentJID);
  }
  IQDiscoItemsHandler iqDiscoItemsHandler=XMPPServer.getInstance().getIQDiscoItemsHandler();
  if (iqDiscoItemsHandler != null) {
    iqDiscoItemsHandler.removeComponentItem(componentJID.toBareJID());
  }
  if (component != null) {
    component.shutdown();
  }
  for (  ComponentEventListener listener : listeners) {
    listener.componentUnregistered(component,componentJID);
  }
  Log.debug("Component unregistered for domain: " + subdomain);
}
