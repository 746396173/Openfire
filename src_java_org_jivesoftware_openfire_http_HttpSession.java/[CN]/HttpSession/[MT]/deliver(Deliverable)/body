{
  Collection<Deliverable> deliverable=Arrays.asList(stanza);
  boolean delivered=false;
synchronized (connectionQueue) {
    for (    HttpConnection connection : connectionQueue) {
      try {
        if (connection.getRequestId() == lastRequestID + 1) {
          lastRequestID=connection.getRequestId();
          deliver(connection,deliverable);
          delivered=true;
          break;
        }
      }
 catch (      HttpConnectionClosedException e) {
        Log.warn("Iterating over a connection that was closed. Openfire will recover from this problem, but it should not occur in the first place.");
      }
catch (      IOException e) {
      }
    }
  }
  if (!delivered) {
    pendingElements.add(stanza);
  }
}
