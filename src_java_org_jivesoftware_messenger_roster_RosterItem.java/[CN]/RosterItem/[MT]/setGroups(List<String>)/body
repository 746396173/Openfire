{
  if (groups == null) {
    this.groups=new LinkedList<String>();
  }
 else {
    for (    Group group : getSharedGroups()) {
      String groupName=group.getProperties().get("sharedRoster.displayName");
      if (!groups.contains(groupName)) {
        throw new SharedGroupException("Cannot remove item from shared group");
      }
    }
    for (Iterator<String> it=groups.iterator(); it.hasNext(); ) {
      try {
        String group=it.next();
        GroupManager.getInstance().getGroup(group);
        it.remove();
      }
 catch (      GroupNotFoundException e) {
      }
    }
    this.groups=groups;
  }
}
