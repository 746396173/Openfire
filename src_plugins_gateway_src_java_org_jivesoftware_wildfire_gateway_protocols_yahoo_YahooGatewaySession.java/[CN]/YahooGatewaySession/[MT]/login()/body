{
  if (!isConnected() && !loginFailed && !attemptingLogin) {
    attemptingLogin=true;
    new Thread(){
      @Override public void run(){
        try {
          session.login(getSubscriptionInfo().username,new String(getSubscriptionInfo().password));
          logger.log(Level.INFO,"yahoogatewaysession.login",new Object[]{jid,getSubscriptionInfo().username});
          getJabberEndpoint().getValve().open();
        }
 catch (        LoginRefusedException lre) {
          session.reset();
          if (loginFailedCount++ > 3) {
            loginFailed=true;
          }
          logger.warning("Login failed for " + getSubscriptionInfo().username);
        }
catch (        IOException ioe) {
          ioe.printStackTrace();
        }
        attemptingLogin=false;
      }
    }
.run();
  }
 else {
    logger.warning(this.jid + " is already logged in");
  }
}
