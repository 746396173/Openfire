{
  if (!isConnected() && !loginFailed && !attemptingLogin) {
    attemptingLogin=true;
    new Thread(){
      @Override public void run(){
        try {
          session.login(getSubscriptionInfo().username,new String(getSubscriptionInfo().password));
          Log.info(LocaleUtils.getLocalizedString("yahoogatewaysession.login","gateway",Arrays.asList(new Object[]{jid,getSubscriptionInfo().username})));
          getJabberEndpoint().getValve().open();
        }
 catch (        LoginRefusedException lre) {
          session.reset();
          if (loginFailedCount++ > 3) {
            loginFailed=true;
          }
          Log.warn("Login failed for " + getSubscriptionInfo().username);
        }
catch (        IOException ioe) {
          ioe.printStackTrace();
        }
        attemptingLogin=false;
      }
    }
.run();
  }
 else {
    Log.warn(this.jid + " is already logged in");
  }
}
