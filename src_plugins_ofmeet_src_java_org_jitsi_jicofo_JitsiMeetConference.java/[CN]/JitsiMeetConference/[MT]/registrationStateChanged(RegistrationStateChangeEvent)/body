{
  logger.info("Reg state changed: " + evt);
  if (RegistrationState.REGISTERED.equals(evt.getNewState())) {
    getDirectXmppOpSet().addPacketHandler(messageListener,new MessageTypeFilter(Message.Type.normal));
  }
  maybeJoinTheRoom();
}
