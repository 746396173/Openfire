{
  SERIALIZE_LOCK.lock();
  try {
    if (o instanceof byte[])     return Base64.encodeBase64String((byte[])o);
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ObjectOutputStream oos=new ObjectOutputStream(baos);
    oos.writeObject(o);
    return Base64.encodeBase64String(baos.toByteArray());
  }
  finally {
    SERIALIZE_LOCK.unlock();
  }
}
