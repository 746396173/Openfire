{
  Element paramsE=DocumentHelper.createDocument().addElement("searchBounded");
  Element queryE=paramsE.addElement("query");
  queryE.addElement("keywords").addText(query);
  queryE.addElement("searchUsername").addText("true");
  queryE.addElement("searchName").addText("true");
  queryE.addElement("searchEmail").addText("true");
  queryE.addElement("searchProfile").addText("false");
  paramsE.addElement("startIndex").addText(String.valueOf(startIndex));
  paramsE.addElement("numResults").addText(String.valueOf(numResults));
  try {
    List<String> usernames=new ArrayList<String>();
    String path=SEARCH_URL_PREFIX + "searchProfile";
    Element element=manager.executeRequest(POST,path,paramsE.asXML());
    List<Node> userNodes=(List<Node>)element.selectNodes("return");
    for (    Node userNode : userNodes) {
      String username=userNode.selectSingleNode("username").getText();
      usernames.add(username);
    }
    return new UserCollection(usernames.toArray(new String[usernames.size()]));
  }
 catch (  Exception e) {
    throw new UnsupportedOperationException("Unexpected error",e);
  }
}
