{
  xmlSerializer.writeStartElement("jabber:x:data","field");
  if (getLabel() != null) {
    xmlSerializer.writeAttribute("label",getLabel());
  }
  if (getVariable() != null) {
    xmlSerializer.writeAttribute("var",getVariable());
  }
  if (getType() != null) {
    xmlSerializer.writeAttribute("type",getType());
  }
  if (getDescription() != null) {
    xmlSerializer.writeStartElement("jabber:x:data","desc");
    xmlSerializer.writeCharacters(getDescription());
    xmlSerializer.writeEndElement();
  }
  if (isRequired()) {
    xmlSerializer.writeStartElement("jabber:x:data","required");
    xmlSerializer.writeEndElement();
  }
  if (values.size() > 0) {
    Iterator valuesItr=getValues();
    while (valuesItr.hasNext()) {
      xmlSerializer.writeStartElement("jabber:x:data","value");
      xmlSerializer.writeCharacters((String)valuesItr.next());
      xmlSerializer.writeEndElement();
    }
  }
  if (options.size() > 0) {
    Iterator optionsItr=getOptions();
    while (optionsItr.hasNext()) {
      ((Option)optionsItr.next()).send(xmlSerializer,version);
    }
  }
  Iterator frags=fragments.iterator();
  while (frags.hasNext()) {
    XMPPFragment frag=(XMPPFragment)frags.next();
    frag.send(xmlSerializer,version);
  }
  xmlSerializer.writeEndElement();
}
