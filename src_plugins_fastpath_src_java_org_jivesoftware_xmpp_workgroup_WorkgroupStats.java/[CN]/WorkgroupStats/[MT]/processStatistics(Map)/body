{
  final String action=(String)map.get(ACTION);
  if (END_OF_CHAT.equals(action)) {
    String agent=(String)map.get(AGENT_JID);
    Long startTime=new Long((String)map.get(START_TIME));
    Long endTime=new Long((String)map.get(END_TIME));
    chatList.add(new Object[]{agent,startTime,endTime});
  }
 else   if (AGENT_TRANSFER.equals(action)) {
    final String agent=(String)map.get(AGENT_JID);
    final Long startTime=new Long((String)map.get(START_TIME));
    final Long transferTime=new Long((String)map.get(END_TIME));
    final String agentTransferedTo=(String)map.get(OTHER_AGENT_JID);
    transferList.add(new Object[]{agent,startTime,transferTime,agentTransferedTo});
  }
}
