{
  try {
    this.canonicalPath=SSLConfig.canonicalize(path);
    final File file=new File(canonicalPath);
    if (createIfAbsent && !file.exists()) {
      try (final FileOutputStream os=new FileOutputStream(canonicalPath)){
        store=KeyStore.getInstance(type);
        store.load(null,password.toCharArray());
        store.store(os,password.toCharArray());
        this.password=password.toCharArray();
      }
     }
 else {
      try (final FileInputStream is=new FileInputStream(canonicalPath)){
        store=KeyStore.getInstance(type);
        store.load(is,password.toCharArray());
        this.password=password.toCharArray();
      }
     }
  }
 catch (  IOException|KeyStoreException|NoSuchAlgorithmException|CertificateException ex) {
    throw new CertificateStoreConfigException("Unable to load store of type '" + type + "' from location '"+ path+ "'",ex);
  }
}
