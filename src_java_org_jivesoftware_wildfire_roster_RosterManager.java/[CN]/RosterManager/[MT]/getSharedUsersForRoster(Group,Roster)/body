{
  String showInRoster=group.getProperties().get("sharedRoster.showInRoster");
  String groupNames=group.getProperties().get("sharedRoster.groupList");
  if (!"onlyGroup".equals(showInRoster) && !"everybody".equals(showInRoster)) {
    return new ArrayList<JID>();
  }
  Collection<JID> users=new HashSet<JID>(group.getMembers());
  users.addAll(group.getAdmins());
  if ("everybody".equals(showInRoster)) {
    if (group.isUser(roster.getUsername())) {
      for (      String username : UserManager.getInstance().getUsernames()) {
        users.add(server.createJID(username,null));
      }
    }
  }
 else {
    Collection<Group> groupList=parseGroups(groupNames);
    for (    Group groupInList : groupList) {
      users.addAll(groupInList.getMembers());
      users.addAll(groupInList.getAdmins());
    }
  }
  return users;
}
