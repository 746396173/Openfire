{
  if (rosterCache == null) {
    rosterCache=CacheManager.getCache("username2roster");
  }
  if (rosterCache == null) {
    throw new UserNotFoundException("Could not load caches");
  }
  Roster roster=(Roster)rosterCache.get(username);
  if (roster == null) {
synchronized (username.intern()) {
      roster=(Roster)rosterCache.get(username);
      if (roster == null) {
        roster=new Roster(username);
        rosterCache.put(username,roster);
      }
    }
  }
  if (roster == null) {
    throw new UserNotFoundException(username);
  }
  return roster;
}
