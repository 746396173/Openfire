{
  this.host=JiveGlobals.getXMLProperty("ldap.host");
  String portStr=JiveGlobals.getXMLProperty("ldap.port");
  if (portStr != null) {
    try {
      this.port=Integer.parseInt(portStr);
    }
 catch (    NumberFormatException nfe) {
    }
  }
  if (JiveGlobals.getXMLProperty("ldap.usernameField") != null) {
    this.usernameField=JiveGlobals.getXMLProperty("ldap.usernameField");
  }
  if (JiveGlobals.getXMLProperty("ldap.baseDN") != null) {
    this.baseDN=JiveGlobals.getXMLProperty("ldap.baseDN");
  }
  if (JiveGlobals.getXMLProperty("ldap.alternateBaseDN") != null) {
    this.alternateBaseDN=JiveGlobals.getXMLProperty("ldap.alternateBaseDN");
  }
  if (JiveGlobals.getXMLProperty("ldap.nameField") != null) {
    this.nameField=JiveGlobals.getXMLProperty("ldap.nameField");
  }
  if (JiveGlobals.getXMLProperty("ldap.emailField") != null) {
    this.emailField=JiveGlobals.getXMLProperty("ldap.emailField");
  }
  if (JiveGlobals.getXMLProperty("ldap.connectionPoolEnabled") != null) {
    this.connectionPoolEnabled=Boolean.valueOf(JiveGlobals.getXMLProperty("ldap.connectionPoolEnabled")).booleanValue();
  }
  if (JiveGlobals.getXMLProperty("ldap.searchFilter") != null) {
    this.searchFilter=JiveGlobals.getXMLProperty("ldap.searchFilter");
  }
 else {
    StringBuilder filter=new StringBuilder();
    filter.append("(").append(usernameField).append("={0})");
    this.searchFilter=filter.toString();
  }
  if (JiveGlobals.getXMLProperty("ldap.groupNameField") != null) {
    this.groupNameField=JiveGlobals.getXMLProperty("ldap.groupNameField");
  }
  if (JiveGlobals.getXMLProperty("ldap.groupMemberField") != null) {
    this.groupMemberField=JiveGlobals.getXMLProperty("ldap.groupMemberField");
  }
  if (JiveGlobals.getXMLProperty("ldap.groupDescriptionField") != null) {
    this.groupDescriptionField=JiveGlobals.getXMLProperty("ldap.groupDescriptionField");
  }
  if (JiveGlobals.getXMLProperty("ldap.posixEnabled") != null) {
    this.posixEnabled=Boolean.valueOf(JiveGlobals.getXMLProperty("ldap.posixEnabled"));
  }
  if (JiveGlobals.getXMLProperty("ldap.groupSearchFilter") != null) {
    this.groupSearchFilter=JiveGlobals.getXMLProperty("ldap.groupSearchFilter");
  }
 else {
    this.groupSearchFilter="(" + groupMemberField + "={0})";
  }
  this.adminDN=JiveGlobals.getXMLProperty("ldap.adminDN");
  if (adminDN != null && adminDN.trim().equals("")) {
    adminDN=null;
  }
  this.adminPassword=JiveGlobals.getXMLProperty("ldap.adminPassword");
  this.ldapDebugEnabled=Boolean.valueOf(JiveGlobals.getXMLProperty("ldap.debugEnabled")).booleanValue();
  this.sslEnabled=Boolean.valueOf(JiveGlobals.getXMLProperty("ldap.sslEnabled")).booleanValue();
  this.followReferrals=Boolean.valueOf(JiveGlobals.getXMLProperty("ldap.autoFollowReferrals")).booleanValue();
  this.initialContextFactory=JiveGlobals.getXMLProperty("ldap.initialContextFactory");
  if (initialContextFactory != null) {
    try {
      Class.forName(initialContextFactory);
    }
 catch (    ClassNotFoundException cnfe) {
      Log.error("Initial context factory class failed to load: " + initialContextFactory + ".  Using default initial context factory class instead.");
      initialContextFactory="com.sun.jndi.ldap.LdapCtxFactory";
    }
  }
 else {
    initialContextFactory="com.sun.jndi.ldap.LdapCtxFactory";
  }
  if (Log.isDebugEnabled()) {
    Log.debug("Created new LdapManager() instance, fields:");
    Log.debug("\t host: " + host);
    Log.debug("\t port: " + port);
    Log.debug("\t usernamefield: " + usernameField);
    Log.debug("\t baseDN: " + baseDN);
    Log.debug("\t alternateBaseDN: " + alternateBaseDN);
    Log.debug("\t nameField: " + nameField);
    Log.debug("\t emailField: " + emailField);
    Log.debug("\t adminDN: " + adminDN);
    Log.debug("\t adminPassword: " + adminPassword);
    Log.debug("\t searchFilter: " + searchFilter);
    Log.debug("\t ldapDebugEnabled: " + ldapDebugEnabled);
    Log.debug("\t sslEnabled: " + sslEnabled);
    Log.debug("\t initialContextFactory: " + initialContextFactory);
    Log.debug("\t connectionPoolEnabled: " + connectionPoolEnabled);
    Log.debug("\t autoFollowReferrals: " + followReferrals);
  }
}
