{
  ConnectionManagerImpl connManager=(ConnectionManagerImpl)XMPPServer.getInstance().getConnectionManager();
  defaultPortFilter=new RawPrintFilter();
  connManager.getSocketAcceptor().getFilterChain().addBefore("xmpp","rawDebugger",defaultPortFilter);
  oldPortFilter=new RawPrintFilter();
  connManager.getSSLSocketAcceptor().getFilterChain().addBefore("xmpp","rawDebugger",oldPortFilter);
  interpretedPrinter=new InterpretedXMLPrinter();
  if (JiveGlobals.getBooleanProperty("plugin.debugger.interpretedAllowed")) {
    InterceptorManager.getInstance().addInterceptor(interpretedPrinter);
  }
  PropertyEventDispatcher.addListener(this);
}
