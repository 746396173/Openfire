{
  ConnectionManagerImpl connManager=(ConnectionManagerImpl)XMPPServer.getInstance().getConnectionManager();
  defaultPortFilter=new RawPrintFilter();
  SocketAcceptor socketAcceptor=connManager.getSocketAcceptor();
  if (socketAcceptor != null) {
    socketAcceptor.getFilterChain().addBefore("xmpp","rawDebugger",defaultPortFilter);
  }
  oldPortFilter=new RawPrintFilter();
  SocketAcceptor sslAcceptor=connManager.getSSLSocketAcceptor();
  if (sslAcceptor != null) {
    sslAcceptor.getFilterChain().addBefore("xmpp","rawDebugger",oldPortFilter);
  }
  interpretedPrinter=new InterpretedXMLPrinter();
  if (JiveGlobals.getBooleanProperty("plugin.debugger.interpretedAllowed")) {
    InterceptorManager.getInstance().addInterceptor(interpretedPrinter);
  }
  PropertyEventDispatcher.addListener(this);
}
