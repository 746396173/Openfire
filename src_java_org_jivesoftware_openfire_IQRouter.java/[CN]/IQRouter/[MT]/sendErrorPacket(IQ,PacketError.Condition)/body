{
  if (IQ.Type.error == originalPacket.getType()) {
    Log.error("Cannot reply an IQ error to another IQ error: " + originalPacket);
    return;
  }
  IQ reply=IQ.createResultIQ(originalPacket);
  reply.setChildElement(originalPacket.getChildElement().createCopy());
  reply.setError(condition);
  if (serverName.equals(originalPacket.getFrom().toString())) {
    handle(reply);
    return;
  }
  routingTable.routePacket(reply.getTo(),reply);
}
