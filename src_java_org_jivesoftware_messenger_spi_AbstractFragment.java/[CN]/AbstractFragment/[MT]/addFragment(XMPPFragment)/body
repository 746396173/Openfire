{
  if (fragments == null) {
    fragments=new LinkedList();
  }
 else {
    if (fragment.equals(this)) {
      throw new IllegalArgumentException("Circular parent-child relationship");
    }
    Iterator frags=fragment.getFragments();
    while (frags.hasNext()) {
      if (frags.next().equals(this)) {
        throw new IllegalArgumentException("Circular parent-child relationship");
      }
    }
  }
  fragments.addLast(fragment);
}
