{
synchronized (this) {
    if (isClosed()) {
      return;
    }
    try {
      deliverRawText(flashClient ? "</flash:stream>" : "</stream:stream>",true);
    }
 catch (    Exception e) {
    }
    if (session != null) {
      session.setStatus(Session.STATUS_CLOSED);
    }
    closed=true;
  }
  notifyCloseListeners();
  ioSession.close(true);
}
