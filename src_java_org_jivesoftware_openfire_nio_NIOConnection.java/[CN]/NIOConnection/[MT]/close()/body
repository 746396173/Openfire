{
synchronized (this) {
    if (isClosed()) {
      return;
    }
    try {
      deliverRawText(flashClient ? "</flash:stream>" : "</stream:stream>",false);
    }
 catch (    Exception e) {
    }
    if (session != null) {
      session.setStatus(Session.STATUS_CLOSED);
    }
    notifyCloseListeners();
    closed=true;
  }
  ioSession.close(false);
}
