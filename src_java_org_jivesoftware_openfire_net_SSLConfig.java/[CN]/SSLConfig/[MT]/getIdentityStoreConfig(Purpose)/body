{
  if (purpose == null) {
    throw new IllegalArgumentException("Argument 'purpose' cannot be null.");
  }
  final IdentityStoreConfig config=identityStoresByLocation.get(identityStoreLocationByPurpose.get(purpose));
  if (config == null) {
    throw new IllegalStateException("Cannot retrieve identity store for " + purpose);
  }
  return config;
}
