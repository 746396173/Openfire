{
  if (groupCount != -1 && System.currentTimeMillis() < expiresStamp) {
    return groupCount;
  }
  int count=0;
  if (manager.isDebugEnabled()) {
    Log.debug("Trying to get the number of groups in the system.");
  }
  String searchFilter=MessageFormat.format(manager.getGroupSearchFilter(),"*");
  String returningAttributes[]={manager.getGroupNameField()};
  NamingEnumeration<SearchResult> answer=searchForGroups(searchFilter,returningAttributes);
  for (; answer.hasMoreElements(); count++) {
    try {
      answer.next();
    }
 catch (    Exception e) {
    }
  }
  this.groupCount=count;
  this.expiresStamp=System.currentTimeMillis() + JiveConstants.MINUTE * 5;
  return count;
}
