{
  String messengerHome=null;
  InputStream in=null;
  try {
    in=getClass().getResourceAsStream("/messenger_init.xml");
    if (in != null) {
      Document doc=XPPReader.parseDocument(new InputStreamReader(in),this.getClass());
      messengerHome=doc.getRootElement().getText();
    }
  }
 catch (  Exception e) {
    Log.error("Error loading messenger_init.xml to find messengerHome.",e);
  }
 finally {
    try {
      if (in != null) {
        in.close();
      }
    }
 catch (    Exception e) {
    }
  }
  if (messengerHome != null) {
    messengerHome=messengerHome.trim();
    while (messengerHome.endsWith("/") || messengerHome.endsWith("\\")) {
      messengerHome=messengerHome.substring(0,messengerHome.length() - 1);
    }
  }
  if ("".equals(messengerHome)) {
    messengerHome=null;
  }
  return messengerHome;
}
