{
  if (serverName.equals(receipient.getDomain()) && receipient.getResource() != null && userManager.isRegisteredUser(receipient.getNode())) {
    routingTable.routePacket(new JID(receipient.toBareJID()),packet,false);
  }
 else {
    messageStrategy.storeOffline((Message)packet);
  }
}
