def CalculateVariables(default_variables, params):
    generator_flags = params.get('generator_flags', {})
    for (key, val) in generator_flags.items():
        default_variables.setdefault(key, val)
    flavor = gyp.common.GetFlavor(params)
    default_variables.setdefault('OS', flavor)
    if (flavor == 'win'):
        import gyp.generator.msvs as msvs_generator
        generator_additional_non_configuration_keys = getattr(msvs_generator, 'generator_additional_non_configuration_keys', [])
        generator_additional_path_sections = getattr(msvs_generator, 'generator_additional_path_sections', [])
        gyp.msvs_emulation.CalculateCommonVariables(default_variables, params)
