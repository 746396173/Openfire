{
synchronized (priorityList) {
    if (priorityList.size() > 0) {
      Iterator iter=priorityList.iterator();
      for (int i=0; iter.hasNext(); i++) {
        ClientSession sess=resources.get(iter.next());
        if (sess != null && sess.getPresence().getPriority() <= priority) {
          priorityList.add(i,resource);
          break;
        }
      }
    }
    if (!priorityList.contains(resource)) {
      priorityList.addLast(resource);
    }
  }
}
