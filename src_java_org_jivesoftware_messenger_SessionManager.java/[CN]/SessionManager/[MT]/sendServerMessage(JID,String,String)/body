{
  Packet packet=createServerMessage(subject,body);
  try {
    if (address == null || address.getNode() == null || address.getNode().length() < 1) {
      broadcast(packet);
    }
 else     if (address.getResource() == null || address.getResource().length() < 1) {
      userBroadcast(address.getNode(),packet);
    }
 else {
      getSession(address).getConnection().deliver(packet);
    }
  }
 catch (  Exception e) {
  }
}
