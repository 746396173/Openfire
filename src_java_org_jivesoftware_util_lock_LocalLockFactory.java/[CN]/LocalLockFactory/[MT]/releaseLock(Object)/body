{
  ReentrantLock lock;
synchronized (key) {
    lock=lookupLockForRelease(key);
    if (lock.getHoldCount() <= 1 && !counts.containsKey(key)) {
      locks.remove(key);
    }
  }
  lock.unlock();
}
