{
  if (o1 instanceof WeightedHostAddress && o2 instanceof WeightedHostAddress) {
    WeightedHostAddress srv1=(WeightedHostAddress)o1;
    WeightedHostAddress srv2=(WeightedHostAddress)o2;
    return ((srv1.priority << 15) - (srv2.priority << 15)) + (srv2.weight - srv1.weight);
  }
 else {
    return o1.toString().compareTo(o2.toString());
  }
}
