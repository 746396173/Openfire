{
  BufferedReader in=null;
  try {
    in=new BufferedReader(new InputStreamReader(resource));
    boolean done=false;
    while (!done) {
      StringBuilder command=new StringBuilder();
      while (true) {
        String line=in.readLine();
        if (line == null) {
          done=true;
          break;
        }
        if (isSQLCommandPart(line)) {
          command.append(line);
        }
        if (line.endsWith(";")) {
          break;
        }
      }
      if (!done && !command.toString().equals("")) {
        Statement stmt=con.createStatement();
        stmt.execute(command.toString());
        stmt.close();
      }
    }
  }
  finally {
    if (in != null) {
      try {
        in.close();
      }
 catch (      Exception e) {
      }
    }
  }
}
