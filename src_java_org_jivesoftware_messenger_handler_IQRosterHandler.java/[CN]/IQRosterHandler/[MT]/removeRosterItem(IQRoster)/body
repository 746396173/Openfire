{
  XMPPAddress recipientJID=packet.getRecipient();
  XMPPAddress senderJID=packet.getSender();
  try {
    Iterator itemIter=packet.getRosterItems();
    while (itemIter.hasNext()) {
      RosterItem packetItem=(RosterItem)itemIter.next();
      if (packetItem.getSubStatus() == RosterItem.SUB_REMOVE) {
        Roster roster=userManager.getUser(recipientJID.getName()).getRoster();
        RosterItem item=roster.getRosterItem(senderJID);
        roster.deleteRosterItem(senderJID);
        item.setSubStatus(RosterItem.SUB_REMOVE);
        item.setSubStatus(RosterItem.SUB_NONE);
        XMPPPacket itemPacket=(XMPPPacket)packet.createDeepCopy();
        sessionManager.userBroadcast(recipientJID.getName().toLowerCase(),itemPacket);
      }
    }
  }
 catch (  UserNotFoundException e) {
    throw new UnauthorizedException(e);
  }
}
