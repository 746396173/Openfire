{
  channelAtoB=new SmartChannel(socketA,hostB,portB);
  channelAtoBControl=new SmartChannel(socketAControl,hostB,portB + 1);
  channelBtoA=new SmartChannel(socketB,hostA,portA);
  channelBtoAControl=new SmartChannel(socketBControl,hostA,portA + 1);
  channelAtoB.addListener((SmartChannel)channelBtoA);
  channelAtoBControl.addListener((SmartChannel)channelBtoAControl);
  channelBtoA.addListener((SmartChannel)channelAtoB);
  channelBtoAControl.addListener((SmartChannel)channelAtoBControl);
  threadAtoB=new Thread(channelAtoB);
  threadAtoBControl=new Thread(channelAtoBControl);
  threadBtoA=new Thread(channelBtoA);
  threadBtoAControl=new Thread(channelBtoAControl);
  threadAtoB.start();
  threadAtoBControl.start();
  threadBtoA.start();
  threadBtoAControl.start();
  channelAtoB.addListener(this);
  channelAtoBControl.addListener(this);
  channelBtoA.addListener(this);
  channelBtoAControl.addListener(this);
}
