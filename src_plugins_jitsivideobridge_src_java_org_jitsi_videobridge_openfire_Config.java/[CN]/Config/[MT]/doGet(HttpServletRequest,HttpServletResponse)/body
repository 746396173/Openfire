{
  try {
    Log.info("Config servlet");
    String hostname=XMPPServer.getInstance().getServerInfo().getHostname();
    String domain=XMPPServer.getInstance().getServerInfo().getXMPPDomain();
    boolean websockets=XMPPServer.getInstance().getPluginManager().getPlugin("websockets") != null;
    boolean nodejs=XMPPServer.getInstance().getPluginManager().getPlugin("nodejs") != null;
    writeHeader(response);
    ServletOutputStream out=response.getOutputStream();
    String iceServers=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.iceservers","");
    String resolution=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.resolution","360");
    String audioBandwidth=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.audio.bandwidth","64");
    String videoBandwidth=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.video.bandwidth","512");
    String useNicks=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.usenicks","false");
    String useIPv6=JiveGlobals.getProperty("org.jitsi.videobridge.ofmeet.useipv6","false");
    String recordVideo=JiveGlobals.getProperty("org.jitsi.videobridge.media.record","true");
    out.println("var config = {");
    out.println("    hosts: {");
    out.println("        domain: '" + domain + "',");
    out.println("        muc: 'conference." + domain + "',");
    out.println("        bridge: 'jitsi-videobridge." + domain + "',");
    out.println("    },");
    if (!iceServers.trim().equals(""))     out.println("    iceServers: " + iceServers + ",");
    out.println("    useIPv6: " + useIPv6 + ",");
    out.println("    useNicks: " + useNicks + ",");
    out.println("    recordVideo: " + recordVideo + ",");
    out.println("    useWebsockets: " + (websockets ? "true" : "false") + ",");
    out.println("    useNodeJs: " + (nodejs ? "true" : "false") + ",");
    out.println("    resolution: '" + resolution + "',");
    out.println("    audioBandwidth: '" + audioBandwidth + "',");
    out.println("    videoBandwidth: '" + videoBandwidth + "',");
    out.println("    bosh: window.location.protocol + '//' + window.location.host + '/http-bind/'");
    out.println("};	");
  }
 catch (  Exception e) {
    Log.info("Config doGet Error",e);
  }
}
