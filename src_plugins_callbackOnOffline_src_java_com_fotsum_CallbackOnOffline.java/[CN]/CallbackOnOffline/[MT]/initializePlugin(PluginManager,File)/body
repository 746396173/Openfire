{
  debug=JiveGlobals.getBooleanProperty("plugin.callback_on_offline.debug",false);
  if (debug) {
    Log.debug("initialize CallbackOnOffline plugin. Start.");
  }
  interceptorManager=InterceptorManager.getInstance();
  presenceManager=XMPPServer.getInstance().getPresenceManager();
  userManager=XMPPServer.getInstance().getUserManager();
  client=ClientBuilder.newClient();
  String code="plugin.callback_on_offline.url";
  url=JiveGlobals.getProperty(code,null);
  if (url == null || url.length() == 0) {
    String url="http://localhost:8080/user/offline/callback/url";
    JiveGlobals.setProperty(code,url);
  }
  interceptorManager.addInterceptor(this);
  if (debug) {
    Log.debug("initialize CallbackOnOffline plugin. Finish.");
  }
}
