{
  super.initialize(server);
  this.server=server;
  router=server.getPacketRouter();
  routingTable=server.getRoutingTable();
  deliverer=server.getPacketDeliverer();
  sessionManager=server.getSessionManager();
  if (JiveGlobals.getBooleanProperty("xmpp.socket.heapBuffer",true)) {
    ByteBuffer.setUseDirectBuffers(false);
    ByteBuffer.setAllocator(new SimpleByteBufferAllocator());
  }
}
