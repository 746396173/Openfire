{
  RosterEventDispatcher.addListener(this);
  PresenceEventDispatcher.addListener(this);
  SessionManager sessionManager=SessionManager.getInstance();
  for (  Registration registration : registrationManager.getRegistrations()) {
    String user=registration.getJID().getNode();
    if (sessionManager.getSessionCount(user) > 0) {
      for (      ClientSession session : sessionManager.getSessions(user)) {
        availableSession(session,session.getPresence());
      }
    }
  }
}
