{
  if (clusteringStarted) {
    return;
  }
  boolean enabled=JiveGlobals.getXMLProperty(CLUSTER_PROPERTY_NAME,false);
  if (enabled) {
    startClustering();
  }
  Thread t=new Thread("Cache Stats"){
    private volatile boolean destroyed=false;
    public void run(){
      XMPPServer.getInstance().addServerListener(new XMPPServerListener(){
        public void serverStarted(){
        }
        public void serverStopping(){
          destroyed=true;
        }
      }
);
      while (!destroyed) {
        try {
          cacheFactoryStrategy.updateCacheStats(caches);
        }
 catch (        Exception e) {
          Log.error(e);
        }
        try {
          sleep(10000);
        }
 catch (        InterruptedException ie) {
        }
      }
      Log.debug("Cache stats thread terminated.");
    }
  }
;
  t.setDaemon(true);
  t.start();
}
