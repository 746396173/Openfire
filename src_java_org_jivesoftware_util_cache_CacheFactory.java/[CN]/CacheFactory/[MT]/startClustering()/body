{
  clusteringEnabled=false;
  try {
    cacheFactoryStrategy=(CacheFactoryStrategy)Class.forName(clusteredCacheFactoryClass,true,getClusteredCacheStrategyClassLoader("enterprise")).newInstance();
    boolean clusterStarted=cacheFactoryStrategy.startCluster();
    if (clusterStarted) {
      for (      String cacheName : caches.keySet()) {
        CacheWrapper wrapper=(CacheWrapper)caches.get(cacheName);
        wrapper.setWrappedCache(cacheFactoryStrategy.createCache(cacheName));
      }
      clusteringEnabled=true;
      fireClusteringStarted();
    }
 else {
      cacheFactoryStrategy=(CacheFactoryStrategy)Class.forName(localCacheFactoryClass).newInstance();
    }
  }
 catch (  Exception e) {
    Log.error("Unable to start clustering - continuing in local mode",e);
  }
}
