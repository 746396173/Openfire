{
  final String className=clazz.getName();
  final StringWriter sw=new StringWriter();
  final Throwable throwable=new Throwable();
  throwable.printStackTrace(new PrintWriter(sw,true));
  final StringBuffer buffer=sw.getBuffer();
  final StringBuffer line=new StringBuffer();
  final int length=buffer.length();
  boolean found=false;
  int state=0;
  for (int i=0; i < length; i++) {
    final char ch=buffer.charAt(i);
switch (state) {
case 0:
      if ('\n' == ch)       state=1;
    break;
case 1:
  if ('t' == ch)   state=2;
break;
case 2:
line.setLength(0);
state=3;
break;
case 3:
if ('\n' != ch) line.append(ch);
 else {
final String method=line.toString();
final boolean match=method.startsWith(className);
if (!found && match) {
found=true;
}
 else if (found && !match) {
return method;
}
state=1;
}
}
}
return "";
}
