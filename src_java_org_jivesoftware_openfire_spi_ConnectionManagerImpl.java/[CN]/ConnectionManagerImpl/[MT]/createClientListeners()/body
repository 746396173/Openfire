{
  if (isClientListenerEnabled()) {
    socketAcceptor=buildSocketAcceptor(CLIENT_SOCKET_ACCEPTOR_NAME);
    int eventThreads=JiveGlobals.getIntProperty(ConnectionSettings.Client.MAX_THREADS,16);
    ExecutorFilter executorFilter=new ExecutorFilter();
    ThreadPoolExecutor eventExecutor=(ThreadPoolExecutor)executorFilter.getExecutor();
    ThreadFactory threadFactory=eventExecutor.getThreadFactory();
    threadFactory=new DelegatingThreadFactory("Old executor thread - ",threadFactory);
    eventExecutor.setThreadFactory(threadFactory);
    eventExecutor.setMaximumPoolSize(eventThreads + 1);
    eventExecutor.setCorePoolSize(eventThreads + 1);
    eventExecutor.setKeepAliveTime(60,TimeUnit.SECONDS);
    socketAcceptor.getFilterChain().addFirst(EXECUTOR_FILTER_NAME,executorFilter);
    socketAcceptor.getFilterChain().addAfter(EXECUTOR_FILTER_NAME,XMPP_CODEC_FILTER_NAME,new ProtocolCodecFilter(new XMPPCodecFactory()));
    socketAcceptor.getFilterChain().addAfter(XMPP_CODEC_FILTER_NAME,CAPACITY_FILTER_NAME,new StalledSessionsFilter());
    int maxBufferSize=JiveGlobals.getIntProperty(ConnectionSettings.Client.MAX_READ_BUFFER,10 * MB);
    socketAcceptor.getSessionConfig().setMaxReadBufferSize(maxBufferSize);
    Log.debug("Throttling read buffer for connections from socketAcceptor={} to max={} bytes",socketAcceptor,maxBufferSize);
  }
}
