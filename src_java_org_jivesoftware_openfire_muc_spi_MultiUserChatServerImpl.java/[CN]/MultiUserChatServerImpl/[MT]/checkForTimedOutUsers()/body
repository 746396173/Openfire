{
  if (user_idle == -1) {
    return;
  }
  final long deadline=System.currentTimeMillis() - user_idle;
  for (  LocalMUCUser user : users.values()) {
    try {
      if (user.getLastPacketTime() < deadline) {
        if (!user.isJoined()) {
          removeUser(user.getAddress());
          continue;
        }
        MUCRoom room;
        Presence kickedPresence;
        for (        LocalMUCRole role : user.getRoles()) {
          room=role.getChatRoom();
          try {
            kickedPresence=room.kickOccupant(user.getAddress(),null,null);
            room.send(kickedPresence);
          }
 catch (          NotAllowedException e) {
          }
        }
      }
    }
 catch (    Throwable e) {
      Log.error(LocaleUtils.getLocalizedString("admin.error"),e);
    }
  }
}
