{
  if (isServiceEnabled()) {
    List<RoomInfo> result=(List<RoomInfo>)CacheFactory.doSynchronousClusterTask(new GetNewMemberRoomsRequest(),nodeID);
    if (result != null) {
      for (      RoomInfo roomInfo : result) {
        LocalMUCRoom remoteRoom=roomInfo.getRoom();
        LocalMUCRoom localRoom=rooms.get(remoteRoom.getName());
        if (localRoom == null) {
          localRoom=remoteRoom;
          rooms.put(remoteRoom.getName(),localRoom);
        }
        for (        OccupantAddedEvent event : roomInfo.getOccupants()) {
          event.setSendPresence(true);
          event.run();
        }
      }
    }
  }
}
