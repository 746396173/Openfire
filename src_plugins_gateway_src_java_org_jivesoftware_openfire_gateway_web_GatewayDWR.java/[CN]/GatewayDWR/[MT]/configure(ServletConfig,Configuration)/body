{
  try {
    DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
    DocumentBuilder builder=dbf.newDocumentBuilder();
    document=builder.newDocument();
    Element root=document.createElement("dwr");
    document.appendChild(root);
    Element allowElement=document.createElement("allow");
    allowElement.appendChild(buildCreator("ConfigManager","org.jivesoftware.openfire.gateway.web.ConfigManager"));
    allowElement.appendChild(buildCreator("ConnectionTester","org.jivesoftware.openfire.gateway.web.ConnectionTester"));
    root.appendChild(allowElement);
  }
 catch (  ParserConfigurationException e) {
    Log.error("Error configuring DWR for gateway plugin: ",e);
  }
  configuration.addConfig(document);
}
