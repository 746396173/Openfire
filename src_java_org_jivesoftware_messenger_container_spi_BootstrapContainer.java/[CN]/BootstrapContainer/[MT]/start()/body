{
  try {
    locateMessenger();
    if ("true".equals(JiveGlobals.getXMLProperty("setup"))) {
      setupMode=false;
    }
    if (isStandAlone()) {
      Runtime.getRuntime().addShutdownHook(new ShutdownHookThread());
    }
    lookup=new ServiceLookupImpl();
    ServiceItem serverItem=new ServiceItem(null,this,null);
    containerRegistration=lookup.register(serverItem);
    loader=Thread.currentThread().getContextClassLoader();
    if (setupMode) {
      loadCorePlugins(getSetupModuleNames());
    }
 else {
      verifyDataSource();
      loadCorePlugins(getBootModuleNames());
      loadCorePlugins(getCoreModuleNames());
      loadCorePlugins(getStandardModuleNames());
    }
    startCorePlugins();
    loadPlugins(setupMode);
  }
 catch (  Exception e) {
    e.printStackTrace();
    Log.error(e);
    System.out.println(LocaleUtils.getLocalizedString("startup.error"));
    shutdownContainer();
  }
}
