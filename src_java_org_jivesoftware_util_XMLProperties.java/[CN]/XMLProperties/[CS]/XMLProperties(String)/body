{
  this.file=new File(fileName);
  if (!file.exists()) {
    File tempFile;
    tempFile=new File(file.getParentFile(),file.getName() + ".tmp");
    if (tempFile.exists()) {
      Log.error("WARNING: " + fileName + " was not found, but temp file from "+ "previous write operation was. Attempting automatic recovery."+ " Please check file for data consistency.");
      tempFile.renameTo(file);
    }
 else {
      throw new FileNotFoundException("XML properties file does not exist: " + fileName);
    }
  }
  if (!file.canRead()) {
    throw new IOException("XML properties file must be readable: " + fileName);
  }
  if (!file.canWrite()) {
    throw new IOException("XML properties file must be writable: " + fileName);
  }
  FileReader reader=null;
  try {
    reader=new FileReader(file);
    rootElement=XPPReader.parseDocument(reader,this.getClass()).getRootElement();
  }
 catch (  Exception e) {
    Log.error("Error reading XML properties file " + fileName + ".",e);
    throw new IOException(e.getMessage());
  }
 finally {
    if (reader != null) {
      reader.close();
    }
  }
}
