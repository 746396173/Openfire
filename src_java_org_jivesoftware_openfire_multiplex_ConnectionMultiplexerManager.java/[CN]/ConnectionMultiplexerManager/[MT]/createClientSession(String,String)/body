{
  Connection connection=new ClientSessionConnection(connectionManagerDomain);
  LocalClientSession session=SessionManager.getInstance().createClientSession(connection,new BasicStreamID(streamID));
  streamIDs.put(streamID,connectionManagerDomain);
  Map<String,LocalClientSession> sessions=sessionsByManager.get(connectionManagerDomain);
  if (sessions == null) {
synchronized (connectionManagerDomain.intern()) {
      sessions=sessionsByManager.get(connectionManagerDomain);
      if (sessions == null) {
        sessions=new ConcurrentHashMap<String,LocalClientSession>();
        sessionsByManager.put(connectionManagerDomain,sessions);
      }
    }
  }
  sessions.put(streamID,session);
}
