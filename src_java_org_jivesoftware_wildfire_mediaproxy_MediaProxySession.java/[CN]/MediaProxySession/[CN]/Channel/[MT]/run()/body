{
  try {
    long c=0;
    while (true) {
      packet=new DatagramPacket(buf,buf.length);
      dataSocket.receive(packet);
      if (this.getPort() != packet.getPort())       System.out.println(dataSocket.getLocalAddress().getHostAddress() + ":" + dataSocket.getLocalPort()+ " relay to: "+ packet.getAddress().getHostAddress()+ ":"+ packet.getPort());
      if (c++ < 5) {
        System.out.println("Received:" + dataSocket.getLocalAddress().getHostAddress() + ":"+ dataSocket.getLocalPort());
        System.out.println("Addr: " + packet.getAddress().getHostName());
      }
      boolean resend=true;
      for (      DatagramListener dl : listeners) {
        boolean send=dl.datagramReceived(packet);
        if (resend)         if (!send)         resend=false;
      }
      if (resend)       relayPacket(packet);
    }
  }
 catch (  UnknownHostException uhe) {
    if (enabled)     Log.error(uhe);
  }
catch (  SocketException se) {
    if (enabled)     Log.error(se);
  }
catch (  IOException ioe) {
    if (enabled)     Log.error(ioe);
  }
}
