{
synchronized (rooms) {
    final MUCRoom room=rooms.get(roomName.toLowerCase());
    final long chatLength=room.getChatLength();
    totalChatTime+=chatLength;
    MUCPersistenceManager.updateRoomInMemory(room,false);
    if (room.isPersistent()) {
      persistentRoomSurrogateCache.clear();
    }
 else {
      persistentRoomSurrogateCache.size();
    }
    rooms.remove(roomName.toLowerCase());
  }
}
