{
  XDataFormImpl completedForm=new XDataFormImpl();
  completedForm.parse(formElement);
  if (DataForm.TYPE_CANCEL.equals(completedForm.getType())) {
    if (room.isLocked()) {
      room.destroyRoom(null,null);
    }
  }
 else   if (DataForm.TYPE_SUBMIT.equals(completedForm.getType())) {
    if (completedForm.getFieldsSize() == 0) {
    }
 else {
      processConfigurationForm(completedForm,senderRole,reply);
    }
    if (room.isLocked()) {
      room.unlockRoom();
      Message message=new MessageImpl();
      message.setType(Message.GROUP_CHAT);
      message.setBody(LocaleUtils.getLocalizedString("muc.unlocked"));
      message.setSender(room.getRole().getRoleAddress());
      message.setRecipient(senderRole.getChatUser().getAddress());
      router.route(message);
    }
  }
}
