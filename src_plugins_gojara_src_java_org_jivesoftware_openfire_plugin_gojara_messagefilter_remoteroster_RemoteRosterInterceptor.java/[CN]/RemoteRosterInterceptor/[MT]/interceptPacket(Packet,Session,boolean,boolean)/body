{
  if (!processed && incoming) {
    if (packet instanceof IQ) {
      Log.debug("Incoming unprocessed package i might be interested in. I'm " + this.hashCode() + " for subdomain "+ this._mySubdomain+ ". Package: \n"+ packet.toString()+ "\n");
      IQ myPacket=(IQ)packet;
      if (myPacket.getFrom() == null || myPacket.getTo() == null) {
        if (myPacket.getFrom() != null && myPacket.getType().equals(IQ.Type.set) && myPacket.getTo() == null) {
          if (XpathHelper.findNodesInDocument(myPacket.getChildElement().getDocument(),"//roster:item").size() > 0) {
            _packetProcessor.get("clientToComponentUpdate").process(myPacket);
          }
        }
        return;
      }
      String from=myPacket.getFrom().toString();
      String to=myPacket.getTo().toString();
      if (from.equals(_mySubdomain)) {
        if (myPacket.getType().equals(IQ.Type.get) && XpathHelper.findNodesInDocument(myPacket.getElement().getDocument(),"//roster:*").size() == 1) {
          _packetProcessor.get("sendRoster").process(packet);
        }
 else         if (myPacket.getType().equals(IQ.Type.set) && XpathHelper.findNodesInDocument(myPacket.getElement().getDocument(),"//roster:item").size() >= 1) {
          _packetProcessor.get("receiveChanges").process(packet);
        }
      }
 else       if (to.equals(_mySubdomain) && myPacket.getType().equals(IQ.Type.get) && myPacket.toString().contains("http://jabber.org/protocol/disco#info")) {
        _packetProcessor.get("sparkIQRegistered").process(packet);
      }
    }
 else     if (!JiveGlobals.getBooleanProperty("plugin.remoteroster.persistent",false)) {
      if (packet instanceof Presence && packet.getFrom().toString().equals(_mySubdomain) && !packet.getElement().getStringValue().equals("Connecting")) {
        System.out.println("Test for NonPersistant-Roster Cleanup!");
        _packetProcessor.get("handleNonPersistant").process(packet);
      }
    }
  }
}
