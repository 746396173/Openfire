{
  if (!serviceEnabled) {
    return replyDisabled(packet);
  }
  if (IQ.Type.get.equals(packet.getType())) {
    return processGetPacket(packet);
  }
 else   if (IQ.Type.set.equals(packet.getType())) {
    return processSetPacket(packet);
  }
 else   if (IQ.Type.result.equals(packet.getType()) || IQ.Type.error.equals(packet.getType())) {
  }
 else {
    IQ reply=new IQ(IQ.Type.error,packet.getID());
    reply.setFrom(packet.getTo());
    reply.setTo(packet.getFrom());
    reply.setError(PacketError.Condition.bad_request);
    return reply;
  }
  return null;
}
