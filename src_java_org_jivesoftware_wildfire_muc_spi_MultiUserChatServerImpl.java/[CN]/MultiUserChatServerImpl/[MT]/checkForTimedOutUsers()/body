{
  if (user_idle == -1) {
    return;
  }
  final long deadline=System.currentTimeMillis() - user_idle;
  for (  MUCUser user : users.values()) {
    try {
      if (user.getLastPacketTime() < deadline) {
        Iterator<MUCRole> roles=user.getRoles();
        if (!roles.hasNext()) {
          removeUser(user.getAddress());
          continue;
        }
        MUCRole role;
        MUCRoom room;
        Presence kickedPresence;
        while (roles.hasNext()) {
          role=roles.next();
          room=role.getChatRoom();
          try {
            kickedPresence=room.kickOccupant(user.getAddress(),null,null);
            room.send(kickedPresence);
          }
 catch (          NotAllowedException e) {
          }
        }
      }
    }
 catch (    Throwable e) {
      Log.error(LocaleUtils.getLocalizedString("admin.error"),e);
    }
  }
}
