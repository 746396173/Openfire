{
  final byte[] b=new byte[bufferSize];
  int count=0;
  amountWritten=0;
  do {
    out.write(b,0,count);
    amountWritten+=count;
    count=in.read(b);
  }
 while (count >= 0);
  return amountWritten;
}
