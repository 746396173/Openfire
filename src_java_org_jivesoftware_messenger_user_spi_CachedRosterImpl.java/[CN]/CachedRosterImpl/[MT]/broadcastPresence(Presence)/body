{
  try {
    if (routingTable == null) {
      routingTable=(RoutingTable)ServiceLookupFactory.getLookup().lookup(RoutingTable.class);
    }
    if (routingTable == null) {
      return;
    }
    Iterator items=getRosterItems();
    while (items.hasNext()) {
      RosterItem item=(RosterItem)items.next();
      if (item.getSubStatus() == RosterItem.SUB_BOTH || item.getSubStatus() == RosterItem.SUB_FROM) {
        XMPPAddress searchNode=new XMPPAddress(item.getJid().getName(),item.getJid().getHost(),null);
        Iterator sessions=routingTable.getRoutes(searchNode);
        packet.setRecipient(item.getJid());
        while (sessions.hasNext()) {
          ChannelHandler session=(ChannelHandler)sessions.next();
          try {
            session.process(packet);
          }
 catch (          Exception e) {
          }
        }
      }
    }
  }
 catch (  UnauthorizedException e) {
    Log.error(LocaleUtils.getLocalizedString("admin.error"),e);
  }
}
