def _GetMSBuildProjectReferences(project):
    references = []
    if project.dependencies:
        group = ['ItemGroup']
        for dependency in project.dependencies:
            guid = dependency.guid
            project_dir = os.path.split(project.path)[0]
            relative_path = gyp.common.RelativePath(dependency.path, project_dir)
            project_ref = ['ProjectReference', {'Include': relative_path, }, ['Project', guid], ['ReferenceOutputAssembly', 'false']]
            for config in dependency.spec.get('configurations', {}).itervalues():
                if config.get('msvs_2010_disable_uldi_when_referenced', 0):
                    project_ref.append(['UseLibraryDependencyInputs', 'false'])
                    break
            group.append(project_ref)
        references.append(group)
    return references
