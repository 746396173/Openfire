{
  IQ result=IQ.createResultIQ(originalRequest);
  Element childElement=originalRequest.getChildElement().createCopy();
  result.setChildElement(childElement);
  Element items=childElement.element("items");
  if (isActive()) {
    for (    PublishedItem publishedItem : publishedItems) {
      if (!isKeywordMatched(publishedItem)) {
        continue;
      }
      Element item=items.addElement("item");
      if (((LeafNode)node).isItemRequired()) {
        item.addAttribute("id",publishedItem.getID());
      }
      if ((forceToIncludePayload || node.isDeliverPayloads()) && publishedItem.getPayload() != null) {
        item.add(publishedItem.getPayload().createCopy());
      }
    }
  }
  service.send(result);
}
