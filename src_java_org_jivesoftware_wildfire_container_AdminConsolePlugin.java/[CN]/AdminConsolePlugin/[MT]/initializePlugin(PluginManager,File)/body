{
  this.pluginDir=pluginDir;
  try {
    System.setProperty("org.apache.commons.logging.LogFactory","org.mortbay.log.Factory");
    File logDir=null;
    String logDirectory=JiveGlobals.getXMLProperty("log.directory");
    if (logDirectory != null) {
      if (!logDirectory.endsWith(File.separator)) {
        logDirectory=logDirectory + File.separator;
      }
      logDir=new File(logDirectory);
    }
 else {
      logDir=new File(JiveGlobals.getHomeDirectory(),"logs");
    }
    if (!logDir.exists()) {
      logDir.mkdirs();
    }
    File logFile=new File(logDir,"admin-console.log");
    OutputStreamLogSink logSink=new OutputStreamLogSink(logFile.toString());
    logSink.start();
    Object logImpl=Factory.getFactory().getInstance("");
    if (logImpl instanceof LogImpl) {
      LogImpl log=(LogImpl)logImpl;
      if (Log.isDebugEnabled() && JiveGlobals.getBooleanProperty("jetty.debug.enabled",true)) {
        log.setVerbose(1);
      }
 else {
        log.setVerbose(-1);
      }
      log.add(logSink);
    }
    jetty=new Server();
    loadListeners();
    if (Boolean.getBoolean("developmentMode")) {
      System.out.println(LocaleUtils.getLocalizedString("admin.console.devmode"));
      context=jetty.addWebApplication("/",pluginDir.getParentFile().getParentFile().getParent() + File.separator + "src"+ File.separator+ "web");
    }
 else {
      context=jetty.addWebApplication("/",pluginDir.getAbsoluteFile() + File.separator + "webapp");
    }
    context.setWelcomeFiles(new String[]{"index.jsp"});
    jetty.start();
    printListenerMessages();
  }
 catch (  Exception e) {
    System.err.println("Error starting admin console: " + e.getMessage());
    Log.error("Trouble initializing admin console",e);
  }
}
