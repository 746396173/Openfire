{
  String tag=wrappedElement.getName();
  if (StreamManager.NAMESPACE_V3.equals(wrappedElement.getNamespace().getStringValue())) {
switch (tag) {
case "enable":
      session.enableStreamMangement(wrappedElement);
    break;
case "r":
  session.getStreamManager().sendServerAcknowledgement();
break;
case "a":
session.getStreamManager().processClientAcknowledgement(wrappedElement);
break;
default :
session.getStreamManager().sendUnexpectedError();
}
}
 else {
super.route(wrappedElement);
if (isUnsolicitedAckExpected()) {
session.getStreamManager().sendServerAcknowledgement();
}
}
}
