{
  try {
    org.jivesoftware.smack.packet.IQ smackIq=IQUtils.convert(iq);
    if (smackIq instanceof ColibriStatsIQ) {
      ColibriStatsIQ colibriStatsQuery=(ColibriStatsIQ)smackIq;
      ColibriStatsIQ statsReply=new ColibriStatsIQ();
      statsReply.setType(org.jivesoftware.smack.packet.IQ.Type.RESULT);
      statsReply.setPacketID(iq.getID());
      statsReply.setTo(iq.getFrom().toString());
      int conferenceCount=focusManager.getConferenceCount();
      statsReply.addStat(new ColibriStatsExtension.Stat("conferences",Integer.toString(conferenceCount)));
      statsReply.addStat(new ColibriStatsExtension.Stat("graceful_shutdown",focusManager.isShutdownInProgress() ? "true" : "false"));
      return IQUtils.convert(statsReply);
    }
 else {
      return super.handleIQGet(iq);
    }
  }
 catch (  Exception e) {
    logger.error(e,e);
    throw e;
  }
}
