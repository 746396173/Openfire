{
  fake=null;
  if (jid == null) {
    throw new NullPointerException("JID cannot be null");
  }
  int atIndex=jid.indexOf("@");
  int slashIndex=jid.indexOf("/");
  if (atIndex > 0) {
    node=jid.substring(0,atIndex);
  }
  if (atIndex + 1 > jid.length()) {
    throw new IllegalArgumentException("JID with empty domain not valid");
  }
  if (atIndex < 0) {
    if (slashIndex > 0) {
      domain=jid.substring(0,slashIndex);
    }
 else {
      domain=jid;
    }
  }
 else {
    if (slashIndex > 0) {
      domain=jid.substring(atIndex + 1,slashIndex);
    }
 else {
      domain=jid.substring(atIndex + 1);
    }
  }
  if (slashIndex + 1 > jid.length() || slashIndex < 0) {
    resource=null;
  }
 else {
    resource=jid.substring(slashIndex + 1);
  }
  updateCache();
}
