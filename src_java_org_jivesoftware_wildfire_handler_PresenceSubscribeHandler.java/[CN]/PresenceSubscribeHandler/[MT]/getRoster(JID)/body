{
  String username=null;
  Roster roster=null;
  if (localServer.isLocal(address) && userManager.isRegisteredUser(address.getNode())) {
    username=address.getNode();
    roster=(Roster)CacheManager.getCache("username2roster").get(username);
    if (roster == null) {
synchronized (address.toString().intern()) {
        roster=(Roster)CacheManager.getCache("username2roster").get(username);
        if (roster == null) {
          roster=new Roster(username);
          CacheManager.getCache("username2roster").put(username,roster);
        }
      }
    }
  }
  return roster;
}
