{
  JiveGlobals.setProperty("plugin.gateway." + transportName + ".registration",overallSetting.toString());
  PermissionManager permissionManager=new PermissionManager(TransportType.valueOf(transportName));
  ArrayList<User> userList=new ArrayList<User>();
  UserManager userManager=UserManager.getInstance();
  for (  String username : users) {
    if (username.matches("\\s+")) {
      continue;
    }
    try {
      User user=userManager.getUser(username);
      if (user == null || user.getUsername() == null) {
        throw new UserNotFoundException();
      }
      userList.add(user);
    }
 catch (    UserNotFoundException e) {
      Log.warn("User " + username + " not found while adding access rules.");
    }
  }
  permissionManager.storeUserList(userList);
  ArrayList<Group> groupList=new ArrayList<Group>();
  GroupManager groupManager=GroupManager.getInstance();
  for (  String grpname : groups) {
    if (grpname.matches("\\s+")) {
      continue;
    }
    try {
      Group group=groupManager.getGroup(grpname);
      if (group == null || group.getName() == null) {
        throw new GroupNotFoundException();
      }
      groupList.add(group);
    }
 catch (    GroupNotFoundException e) {
      Log.warn("Group " + grpname + " not found while adding access rules.");
    }
  }
  permissionManager.storeGroupList(groupList);
}
