{
  Log.debug("[[" + cs.internalCallId + "]] Shutdown of rtp thread requested");
synchronized (transmitters) {
    Log.debug("[[" + cs.internalCallId + "]] number of transmitters : "+ transmitters.size());
    for (    String key : transmitters.keySet()) {
      Log.debug("[[" + cs.internalCallId + "]] cancelling transmitter : "+ key);
      transmitters.get(key).cancel();
    }
  }
  try {
    dtmfQueue.put('\0');
  }
 catch (  InterruptedException e) {
    Log.error("unable to queue shutdown signal!",e);
  }
  try {
    sipSocket.close();
  }
 catch (  IOException e) {
    Log.error("unable to close sip-side rtp socket!",e);
  }
  try {
    jabberSocket.close();
  }
 catch (  IOException e) {
    Log.error("unable to close xmpp-side rtp socket!",e);
  }
  try {
    sipSocketRtcp.close();
  }
 catch (  IOException e) {
    Log.error("Error in rtcp shutdown",e);
  }
  try {
    jabberSocketRtcp.close();
  }
 catch (  IOException e) {
    Log.error("Error in rtcp shutdown",e);
  }
}
