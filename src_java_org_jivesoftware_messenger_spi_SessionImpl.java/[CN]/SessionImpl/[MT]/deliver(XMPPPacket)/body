{
  if (conn != null && !conn.isClosed()) {
    try {
      conn.deliver(packet);
    }
 catch (    Exception e) {
      try {
        conn.close();
      }
 catch (      UnauthorizedException e1) {
        Log.error(LocaleUtils.getLocalizedString("admin.error"),e1);
      }
    }
  }
}
