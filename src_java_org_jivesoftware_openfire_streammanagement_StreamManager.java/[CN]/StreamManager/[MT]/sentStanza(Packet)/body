{
  if (isEnabled()) {
synchronized (this) {
      this.serverSentStanzas++;
      unacknowledgedServerStanzas.addLast(new StreamManager.UnackedPacket(new Date(),packet.createCopy()));
      Log.debug("Added stanza of type {}, now {} / {}",packet.getClass().getName(),serverSentStanzas,unacknowledgedServerStanzas.size());
    }
    if (serverSentStanzas % JiveGlobals.getLongProperty("stream.management.requestFrequency",5) == 0) {
      sendServerRequest();
    }
  }
}
